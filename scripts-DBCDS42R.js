(function(bt){if(typeof exports=="object"&&typeof module<"u")module.exports=bt();else if(typeof define=="function"&&define.amd)define([],bt);else{var Ze;typeof window<"u"?Ze=window:typeof global<"u"?Ze=global:typeof self<"u"?Ze=self:Ze=this,Ze.MapboxDirections=bt()}})(function(){var bt,Ze,Sn;return function(){function k(C,v,d){function g(i,p){if(!v[i]){if(!C[i]){var O=typeof require=="function"&&require;if(!p&&O)return O(i,!0);if(_)return _(i,!0);var S=new Error("Cannot find module '"+i+"'");throw S.code="MODULE_NOT_FOUND",S}var I=v[i]={exports:{}};C[i][0].call(I.exports,function(y){var T=C[i][1][y];return g(T||y)},I,I.exports,k,C,v,d)}return v[i].exports}for(var _=typeof require=="function"&&require,m=0;m<d.length;m++)g(d[m]);return g}return k}()({1:[function(k,C,v){var d=k("./toPropertyKey.js");function g(_,m,i){return m=d(m),m in _?Object.defineProperty(_,m,{value:i,enumerable:!0,configurable:!0,writable:!0}):_[m]=i,_}C.exports=g,C.exports.__esModule=!0,C.exports.default=C.exports},{"./toPropertyKey.js":4}],2:[function(k,C,v){var d=k("./defineProperty.js");function g(m,i){var p=Object.keys(m);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(m);i&&(O=O.filter(function(S){return Object.getOwnPropertyDescriptor(m,S).enumerable})),p.push.apply(p,O)}return p}function _(m){for(var i=1;i<arguments.length;i++){var p=arguments[i]!=null?arguments[i]:{};i%2?g(Object(p),!0).forEach(function(O){d(m,O,p[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(p)):g(Object(p)).forEach(function(O){Object.defineProperty(m,O,Object.getOwnPropertyDescriptor(p,O))})}return m}C.exports=_,C.exports.__esModule=!0,C.exports.default=C.exports},{"./defineProperty.js":1}],3:[function(k,C,v){var d=k("./typeof.js").default;function g(_,m){if(d(_)!=="object"||_===null)return _;var i=_[Symbol.toPrimitive];if(i!==void 0){var p=i.call(_,m||"default");if(d(p)!=="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(_)}C.exports=g,C.exports.__esModule=!0,C.exports.default=C.exports},{"./typeof.js":5}],4:[function(k,C,v){var d=k("./typeof.js").default,g=k("./toPrimitive.js");function _(m){var i=g(m,"string");return d(i)==="symbol"?i:String(i)}C.exports=_,C.exports.__esModule=!0,C.exports.default=C.exports},{"./toPrimitive.js":3,"./typeof.js":5}],5:[function(k,C,v){function d(g){"@babel/helpers - typeof";return C.exports=d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},C.exports.__esModule=!0,C.exports.default=C.exports,d(g)}C.exports=d,C.exports.__esModule=!0,C.exports.default=C.exports},{}],6:[function(k,C,v){"use strict";var d={};function g(i){return Math.floor(Math.abs(i)+.5)*(i>=0?1:-1)}function _(i,p,O){i=g(i*O),p=g(p*O);var S=i-p;S<<=1,i-p<0&&(S=~S);for(var I="";S>=32;)I+=String.fromCharCode((32|S&31)+63),S>>=5;return I+=String.fromCharCode(S+63),I}d.decode=function(i,p){for(var O=0,S=0,I=0,y=[],T=0,F=0,P=null,o,a,c=Math.pow(10,Number.isInteger(p)?p:5);O<i.length;){P=null,T=0,F=0;do P=i.charCodeAt(O++)-63,F|=(P&31)<<T,T+=5;while(P>=32);o=F&1?~(F>>1):F>>1,T=F=0;do P=i.charCodeAt(O++)-63,F|=(P&31)<<T,T+=5;while(P>=32);a=F&1?~(F>>1):F>>1,S+=o,I+=a,y.push([S/c,I/c])}return y},d.encode=function(i,p){if(!i.length)return"";for(var O=Math.pow(10,Number.isInteger(p)?p:5),S=_(i[0][0],0,O)+_(i[0][1],0,O),I=1;I<i.length;I++){var y=i[I],T=i[I-1];S+=_(y[0],T[0],O),S+=_(y[1],T[1],O)}return S};function m(i){for(var p=[],O=0;O<i.length;O++){var S=i[O].slice();p.push([S[1],S[0]])}return p}d.fromGeoJSON=function(i,p){if(i&&i.type==="Feature"&&(i=i.geometry),!i||i.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return d.encode(m(i.coordinates),p)},d.toGeoJSON=function(i,p){var O=d.decode(i,p);return{type:"LineString",coordinates:m(O)}},typeof C=="object"&&C.exports&&(C.exports=d)},{}],7:[function(k,C,v){"use strict";var d=typeof Reflect=="object"?Reflect:null,g=d&&typeof d.apply=="function"?d.apply:function(n,r,w){return Function.prototype.apply.call(n,r,w)},_;d&&typeof d.ownKeys=="function"?_=d.ownKeys:Object.getOwnPropertySymbols?_=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:_=function(n){return Object.getOwnPropertyNames(n)};function m(s){console&&console.warn&&console.warn(s)}var i=Number.isNaN||function(n){return n!==n};function p(){p.init.call(this)}C.exports=p,C.exports.once=q,p.EventEmitter=p,p.prototype._events=void 0,p.prototype._eventsCount=0,p.prototype._maxListeners=void 0;var O=10;function S(s){if(typeof s!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s)}Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return O},set:function(s){if(typeof s!="number"||s<0||i(s))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+s+".");O=s}}),p.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||i(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function I(s){return s._maxListeners===void 0?p.defaultMaxListeners:s._maxListeners}p.prototype.getMaxListeners=function(){return I(this)},p.prototype.emit=function(n){for(var r=[],w=1;w<arguments.length;w++)r.push(arguments[w]);var x=n==="error",f=this._events;if(f!==void 0)x=x&&f.error===void 0;else if(!x)return!1;if(x){var E;if(r.length>0&&(E=r[0]),E instanceof Error)throw E;var j=new Error("Unhandled error."+(E?" ("+E.message+")":""));throw j.context=E,j}var G=f[n];if(G===void 0)return!1;if(typeof G=="function")g(G,this,r);else for(var K=G.length,z=a(G,K),w=0;w<K;++w)g(z[w],this,r);return!0};function y(s,n,r,w){var x,f,E;if(S(r),f=s._events,f===void 0?(f=s._events=Object.create(null),s._eventsCount=0):(f.newListener!==void 0&&(s.emit("newListener",n,r.listener?r.listener:r),f=s._events),E=f[n]),E===void 0)E=f[n]=r,++s._eventsCount;else if(typeof E=="function"?E=f[n]=w?[r,E]:[E,r]:w?E.unshift(r):E.push(r),x=I(s),x>0&&E.length>x&&!E.warned){E.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+E.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=s,j.type=n,j.count=E.length,m(j)}return s}p.prototype.addListener=function(n,r){return y(this,n,r,!1)},p.prototype.on=p.prototype.addListener,p.prototype.prependListener=function(n,r){return y(this,n,r,!0)};function T(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function F(s,n,r){var w={fired:!1,wrapFn:void 0,target:s,type:n,listener:r},x=T.bind(w);return x.listener=r,w.wrapFn=x,x}p.prototype.once=function(n,r){return S(r),this.on(n,F(this,n,r)),this},p.prototype.prependOnceListener=function(n,r){return S(r),this.prependListener(n,F(this,n,r)),this},p.prototype.removeListener=function(n,r){var w,x,f,E,j;if(S(r),x=this._events,x===void 0)return this;if(w=x[n],w===void 0)return this;if(w===r||w.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete x[n],x.removeListener&&this.emit("removeListener",n,w.listener||r));else if(typeof w!="function"){for(f=-1,E=w.length-1;E>=0;E--)if(w[E]===r||w[E].listener===r){j=w[E].listener,f=E;break}if(f<0)return this;f===0?w.shift():c(w,f),w.length===1&&(x[n]=w[0]),x.removeListener!==void 0&&this.emit("removeListener",n,j||r)}return this},p.prototype.off=p.prototype.removeListener,p.prototype.removeAllListeners=function(n){var r,w,x;if(w=this._events,w===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[n]),this;if(arguments.length===0){var f=Object.keys(w),E;for(x=0;x<f.length;++x)E=f[x],E!=="removeListener"&&this.removeAllListeners(E);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=w[n],typeof r=="function")this.removeListener(n,r);else if(r!==void 0)for(x=r.length-1;x>=0;x--)this.removeListener(n,r[x]);return this};function P(s,n,r){var w=s._events;if(w===void 0)return[];var x=w[n];return x===void 0?[]:typeof x=="function"?r?[x.listener||x]:[x]:r?N(x):a(x,x.length)}p.prototype.listeners=function(n){return P(this,n,!0)},p.prototype.rawListeners=function(n){return P(this,n,!1)},p.listenerCount=function(s,n){return typeof s.listenerCount=="function"?s.listenerCount(n):o.call(s,n)},p.prototype.listenerCount=o;function o(s){var n=this._events;if(n!==void 0){var r=n[s];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}p.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]};function a(s,n){for(var r=new Array(n),w=0;w<n;++w)r[w]=s[w];return r}function c(s,n){for(;n+1<s.length;n++)s[n]=s[n+1];s.pop()}function N(s){for(var n=new Array(s.length),r=0;r<n.length;++r)n[r]=s[r].listener||s[r];return n}function q(s,n){return new Promise(function(r,w){function x(E){s.removeListener(n,f),w(E)}function f(){typeof s.removeListener=="function"&&s.removeListener("error",x),r([].slice.call(arguments))}D(s,n,f,{once:!0}),n!=="error"&&$(s,x,{once:!0})})}function $(s,n,r){typeof s.on=="function"&&D(s,"error",n,r)}function D(s,n,r,w){if(typeof s.on=="function")w.once?s.once(n,r):s.on(n,r);else if(typeof s.addEventListener=="function")s.addEventListener(n,function x(f){w.once&&s.removeEventListener(n,x),r(f)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof s)}},{}],8:[function(k,C,v){(function(){var d=this,g={};typeof v<"u"?C.exports=g:d.fuzzy=g,g.simpleFilter=function(_,m){return m.filter(function(i){return g.test(_,i)})},g.test=function(_,m){return g.match(_,m)!==null},g.match=function(_,m,i){i=i||{};var p=0,O=[],S=m.length,I=0,y=0,T=i.pre||"",F=i.post||"",P=i.caseSensitive&&m||m.toLowerCase(),o;_=i.caseSensitive&&_||_.toLowerCase();for(var a=0;a<S;a++)o=m[a],P[a]===_[p]?(o=T+o+F,p+=1,y+=1+y):y=0,I+=y,O[O.length]=o;return p===_.length?(I=P===_?1/0:I,{rendered:O.join(""),score:I}):null},g.filter=function(_,m,i){return!m||m.length===0?[]:typeof _!="string"?m:(i=i||{},m.reduce(function(p,O,S,I){var y=O;i.extract&&(y=i.extract(O));var T=g.match(_,y,i);return T!=null&&(p[p.length]={string:T.rendered,score:T.score,index:S,original:O}),p},[]).sort(function(p,O){var S=O.score-p.score;return S||p.index-O.index}))}})()},{}],9:[function(k,C,v){var d=/<%=([\s\S]+?)%>/g;C.exports=d},{}],10:[function(k,C,v){(function(d){(function(){var g="Expected a function",_=NaN,m="[object Symbol]",i=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,O=/^0b[01]+$/i,S=/^0o[0-7]+$/i,I=parseInt,y=typeof d=="object"&&d&&d.Object===Object&&d,T=typeof self=="object"&&self&&self.Object===Object&&self,F=y||T||Function("return this")(),P=Object.prototype,o=P.toString,a=Math.max,c=Math.min,N=function(){return F.Date.now()};function q(r,w,x){var f,E,j,G,K,z,J=0,H=!1,X=!1,re=!0;if(typeof r!="function")throw new TypeError(g);w=n(w)||0,$(x)&&(H=!!x.leading,X="maxWait"in x,j=X?a(n(x.maxWait)||0,w):j,re="trailing"in x?!!x.trailing:re);function ee(Z){var fe=f,be=E;return f=E=void 0,J=Z,G=r.apply(be,fe),G}function h(Z){return J=Z,K=setTimeout(B,w),H?ee(Z):G}function M(Z){var fe=Z-z,be=Z-J,ne=w-fe;return X?c(ne,j-be):ne}function U(Z){var fe=Z-z,be=Z-J;return z===void 0||fe>=w||fe<0||X&&be>=j}function B(){var Z=N();if(U(Z))return L(Z);K=setTimeout(B,M(Z))}function L(Z){return K=void 0,re&&f?ee(Z):(f=E=void 0,G)}function Q(){K!==void 0&&clearTimeout(K),J=0,f=z=E=K=void 0}function te(){return K===void 0?G:L(N())}function ie(){var Z=N(),fe=U(Z);if(f=arguments,E=this,z=Z,fe){if(K===void 0)return h(z);if(X)return K=setTimeout(B,w),ee(z)}return K===void 0&&(K=setTimeout(B,w)),G}return ie.cancel=Q,ie.flush=te,ie}function $(r){var w=typeof r;return!!r&&(w=="object"||w=="function")}function D(r){return!!r&&typeof r=="object"}function s(r){return typeof r=="symbol"||D(r)&&o.call(r)==m}function n(r){if(typeof r=="number")return r;if(s(r))return _;if($(r)){var w=typeof r.valueOf=="function"?r.valueOf():r;r=$(w)?w+"":w}if(typeof r!="string")return r===0?r:+r;r=r.replace(i,"");var x=O.test(r);return x||S.test(r)?I(r.slice(2),x?2:8):p.test(r)?_:+r}C.exports=q}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],11:[function(k,C,v){(function(d){(function(){var g=200,_="__lodash_hash_undefined__",m=1,i=2,p=9007199254740991,O="[object Arguments]",S="[object Array]",I="[object AsyncFunction]",y="[object Boolean]",T="[object Date]",F="[object Error]",P="[object Function]",o="[object GeneratorFunction]",a="[object Map]",c="[object Number]",N="[object Null]",q="[object Object]",$="[object Promise]",D="[object Proxy]",s="[object RegExp]",n="[object Set]",r="[object String]",w="[object Symbol]",x="[object Undefined]",f="[object WeakMap]",E="[object ArrayBuffer]",j="[object DataView]",G="[object Float32Array]",K="[object Float64Array]",z="[object Int8Array]",J="[object Int16Array]",H="[object Int32Array]",X="[object Uint8Array]",re="[object Uint8ClampedArray]",ee="[object Uint16Array]",h="[object Uint32Array]",M=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,L={};L[G]=L[K]=L[z]=L[J]=L[H]=L[X]=L[re]=L[ee]=L[h]=!0,L[O]=L[S]=L[E]=L[y]=L[j]=L[T]=L[F]=L[P]=L[a]=L[c]=L[q]=L[s]=L[n]=L[r]=L[f]=!1;var Q=typeof d=="object"&&d&&d.Object===Object&&d,te=typeof self=="object"&&self&&self.Object===Object&&self,ie=Q||te||Function("return this")(),Z=typeof v=="object"&&v&&!v.nodeType&&v,fe=Z&&typeof C=="object"&&C&&!C.nodeType&&C,be=fe&&fe.exports===Z,ne=be&&Q.process,Be=function(){try{return ne&&ne.binding&&ne.binding("util")}catch{}}(),Qe=Be&&Be.isTypedArray;function Oe(e,u){for(var R=-1,W=e==null?0:e.length,ae=0,Y=[];++R<W;){var ce=e[R];u(ce,R,e)&&(Y[ae++]=ce)}return Y}function ye(e,u){for(var R=-1,W=u.length,ae=e.length;++R<W;)e[ae+R]=u[R];return e}function Ee(e,u){for(var R=-1,W=e==null?0:e.length;++R<W;)if(u(e[R],R,e))return!0;return!1}function ze(e,u){for(var R=-1,W=Array(e);++R<e;)W[R]=u(R);return W}function Ot(e){return function(u){return e(u)}}function at(e,u){return e.has(u)}function Et(e,u){return e?.[u]}function St(e){var u=-1,R=Array(e.size);return e.forEach(function(W,ae){R[++u]=[ae,W]}),R}function wt(e,u){return function(R){return e(u(R))}}function Tt(e){var u=-1,R=Array(e.size);return e.forEach(function(W){R[++u]=W}),R}var Qt=Array.prototype,zt=Function.prototype,et=Object.prototype,st=ie["__core-js_shared__"],It=zt.toString,Se=et.hasOwnProperty,Nt=function(){var e=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=et.toString,ut=RegExp("^"+It.call(Se).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=be?ie.Buffer:void 0,me=ie.Symbol,ct=ie.Uint8Array,ft=et.propertyIsEnumerable,Ht=Qt.splice,Le=me?me.toStringTag:void 0,lt=Object.getOwnPropertySymbols,tt=He?He.isBuffer:void 0,Vt=wt(Object.keys,Object),dt=$e(ie,"DataView"),we=$e(ie,"Map"),Ue=$e(ie,"Promise"),pt=$e(ie,"Set"),ht=$e(ie,"WeakMap"),qe=$e(Object,"create"),Yt=de(dt),Rt=de(we),xt=de(Ue),At=de(pt),Jt=de(ht),yt=me?me.prototype:void 0,De=yt?yt.valueOf:void 0;function Ce(e){var u=-1,R=e==null?0:e.length;for(this.clear();++u<R;){var W=e[u];this.set(W[0],W[1])}}function Xt(){this.__data__=qe?qe(null):{},this.size=0}function Zt(e){var u=this.has(e)&&delete this.__data__[e];return this.size-=u?1:0,u}function en(e){var u=this.__data__;if(qe){var R=u[e];return R===_?void 0:R}return Se.call(u,e)?u[e]:void 0}function tn(e){var u=this.__data__;return qe?u[e]!==void 0:Se.call(u,e)}function Dt(e,u){var R=this.__data__;return this.size+=this.has(e)?0:1,R[e]=qe&&u===void 0?_:u,this}Ce.prototype.clear=Xt,Ce.prototype.delete=Zt,Ce.prototype.get=en,Ce.prototype.has=tn,Ce.prototype.set=Dt;function xe(e){var u=-1,R=e==null?0:e.length;for(this.clear();++u<R;){var W=e[u];this.set(W[0],W[1])}}function Ct(){this.__data__=[],this.size=0}function nn(e){var u=this.__data__,R=Ve(u,e);if(R<0)return!1;var W=u.length-1;return R==W?u.pop():Ht.call(u,R,1),--this.size,!0}function rn(e){var u=this.__data__,R=Ve(u,e);return R<0?void 0:u[R][1]}function Pt(e){return Ve(this.__data__,e)>-1}function on(e,u){var R=this.__data__,W=Ve(R,e);return W<0?(++this.size,R.push([e,u])):R[W][1]=u,this}xe.prototype.clear=Ct,xe.prototype.delete=nn,xe.prototype.get=rn,xe.prototype.has=Pt,xe.prototype.set=on;function Me(e){var u=-1,R=e==null?0:e.length;for(this.clear();++u<R;){var W=e[u];this.set(W[0],W[1])}}function Lt(){this.size=0,this.__data__={hash:new Ce,map:new(we||xe),string:new Ce}}function Mt(e){var u=rt(this,e).delete(e);return this.size-=u?1:0,u}function an(e){return rt(this,e).get(e)}function jt(e){return rt(this,e).has(e)}function sn(e,u){var R=rt(this,e),W=R.size;return R.set(e,u),this.size+=R.size==W?0:1,this}Me.prototype.clear=Lt,Me.prototype.delete=Mt,Me.prototype.get=an,Me.prototype.has=jt,Me.prototype.set=sn;function nt(e){var u=-1,R=e==null?0:e.length;for(this.__data__=new Me;++u<R;)this.add(e[u])}function un(e){return this.__data__.set(e,_),this}function cn(e){return this.__data__.has(e)}nt.prototype.add=nt.prototype.push=un,nt.prototype.has=cn;function Pe(e){var u=this.__data__=new xe(e);this.size=u.size}function fn(){this.__data__=new xe,this.size=0}function gt(e){var u=this.__data__,R=u.delete(e);return this.size=u.size,R}function ln(e){return this.__data__.get(e)}function kt(e){return this.__data__.has(e)}function vt(e,u){var R=this.__data__;if(R instanceof xe){var W=R.__data__;if(!we||W.length<g-1)return W.push([e,u]),this.size=++R.size,this;R=this.__data__=new Me(W)}return R.set(e,u),this.size=R.size,this}Pe.prototype.clear=fn,Pe.prototype.delete=gt,Pe.prototype.get=ln,Pe.prototype.has=kt,Pe.prototype.set=vt;function dn(e,u){var R=ge(e),W=!R&&Ie(e),ae=!R&&!W&&pe(e),Y=!R&&!W&&!ae&&_t(e),ce=R||W||ae||Y,he=ce?ze(e.length,String):[],ve=he.length;for(var ue in e)(u||Se.call(e,ue))&&!(ce&&(ue=="length"||ae&&(ue=="offset"||ue=="parent")||Y&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||b(ue,ve)))&&he.push(ue);return he}function Ve(e,u){for(var R=e.length;R--;)if(se(e[R][0],u))return R;return-1}function Ft(e,u,R){var W=u(e);return ge(e)?W:ye(W,R(e))}function We(e){return e==null?e===void 0?x:N:Le&&Le in Object(e)?qt(e):le(e)}function Ye(e){return Ge(e)&&We(e)==O}function je(e,u,R,W,ae){return e===u?!0:e==null||u==null||!Ge(e)&&!Ge(u)?e!==e&&u!==u:pn(e,u,R,W,je,ae)}function pn(e,u,R,W,ae,Y){var ce=ge(e),he=ge(u),ve=ce?S:t(e),ue=he?S:t(u);ve=ve==O?q:ve,ue=ue==O?q:ue;var Te=ve==q,Ae=ue==q,_e=ve==ue;if(_e&&pe(e)){if(!pe(u))return!1;ce=!0,Te=!1}if(_e&&!Te)return Y||(Y=new Pe),ce||_t(e)?mt(e,u,R,W,ae,Y):vn(e,u,ve,R,W,ae,Y);if(!(R&m)){var Ne=Te&&Se.call(e,"__wrapped__"),Re=Ae&&Se.call(u,"__wrapped__");if(Ne||Re){var Ke=Ne?e.value():e,ke=Re?u.value():u;return Y||(Y=new Pe),ae(Ke,ke,R,W,Y)}}return _e?(Y||(Y=new Pe),mn(e,u,R,W,ae,Y)):!1}function hn(e){if(!Je(e)||V(e))return!1;var u=$t(e)?ut:U;return u.test(de(e))}function yn(e){return Ge(e)&&it(e.length)&&!!L[We(e)]}function gn(e){if(!oe(e))return Vt(e);var u=[];for(var R in Object(e))Se.call(e,R)&&R!="constructor"&&u.push(R);return u}function mt(e,u,R,W,ae,Y){var ce=R&m,he=e.length,ve=u.length;if(he!=ve&&!(ce&&ve>he))return!1;var ue=Y.get(e);if(ue&&Y.get(u))return ue==u;var Te=-1,Ae=!0,_e=R&i?new nt:void 0;for(Y.set(e,u),Y.set(u,e);++Te<he;){var Ne=e[Te],Re=u[Te];if(W)var Ke=ce?W(Re,Ne,Te,u,e,Y):W(Ne,Re,Te,e,u,Y);if(Ke!==void 0){if(Ke)continue;Ae=!1;break}if(_e){if(!Ee(u,function(ke,Xe){if(!at(_e,Xe)&&(Ne===ke||ae(Ne,ke,R,W,Y)))return _e.push(Xe)})){Ae=!1;break}}else if(!(Ne===Re||ae(Ne,Re,R,W,Y))){Ae=!1;break}}return Y.delete(e),Y.delete(u),Ae}function vn(e,u,R,W,ae,Y,ce){switch(R){case j:if(e.byteLength!=u.byteLength||e.byteOffset!=u.byteOffset)return!1;e=e.buffer,u=u.buffer;case E:return!(e.byteLength!=u.byteLength||!Y(new ct(e),new ct(u)));case y:case T:case c:return se(+e,+u);case F:return e.name==u.name&&e.message==u.message;case s:case r:return e==u+"";case a:var he=St;case n:var ve=W&m;if(he||(he=Tt),e.size!=u.size&&!ve)return!1;var ue=ce.get(e);if(ue)return ue==u;W|=i,ce.set(e,u);var Te=mt(he(e),he(u),W,ae,Y,ce);return ce.delete(e),Te;case w:if(De)return De.call(e)==De.call(u)}return!1}function mn(e,u,R,W,ae,Y){var ce=R&m,he=Ut(e),ve=he.length,ue=Ut(u),Te=ue.length;if(ve!=Te&&!ce)return!1;for(var Ae=ve;Ae--;){var _e=he[Ae];if(!(ce?_e in u:Se.call(u,_e)))return!1}var Ne=Y.get(e);if(Ne&&Y.get(u))return Ne==u;var Re=!0;Y.set(e,u),Y.set(u,e);for(var Ke=ce;++Ae<ve;){_e=he[Ae];var ke=e[_e],Xe=u[_e];if(W)var En=ce?W(Xe,ke,_e,u,e,Y):W(ke,Xe,_e,e,u,Y);if(!(En===void 0?ke===Xe||ae(ke,Xe,R,W,Y):En)){Re=!1;break}Ke||(Ke=_e=="constructor")}if(Re&&!Ke){var Kt=e.constructor,Bt=u.constructor;Kt!=Bt&&"constructor"in e&&"constructor"in u&&!(typeof Kt=="function"&&Kt instanceof Kt&&typeof Bt=="function"&&Bt instanceof Bt)&&(Re=!1)}return Y.delete(e),Y.delete(u),Re}function Ut(e){return Ft(e,ot,_n)}function rt(e,u){var R=e.__data__;return A(u)?R[typeof u=="string"?"string":"hash"]:R.map}function $e(e,u){var R=Et(e,u);return hn(R)?R:void 0}function qt(e){var u=Se.call(e,Le),R=e[Le];try{e[Le]=void 0;var W=!0}catch{}var ae=Fe.call(e);return W&&(u?e[Le]=R:delete e[Le]),ae}var _n=lt?function(e){return e==null?[]:(e=Object(e),Oe(lt(e),function(u){return ft.call(e,u)}))}:On,t=We;(dt&&t(new dt(new ArrayBuffer(1)))!=j||we&&t(new we)!=a||Ue&&t(Ue.resolve())!=$||pt&&t(new pt)!=n||ht&&t(new ht)!=f)&&(t=function(e){var u=We(e),R=u==q?e.constructor:void 0,W=R?de(R):"";if(W)switch(W){case Yt:return j;case Rt:return a;case xt:return $;case At:return n;case Jt:return f}return u});function b(e,u){return u=u??p,!!u&&(typeof e=="number"||B.test(e))&&e>-1&&e%1==0&&e<u}function A(e){var u=typeof e;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?e!=="__proto__":e===null}function V(e){return!!Nt&&Nt in e}function oe(e){var u=e&&e.constructor,R=typeof u=="function"&&u.prototype||et;return e===R}function le(e){return Fe.call(e)}function de(e){if(e!=null){try{return It.call(e)}catch{}try{return e+""}catch{}}return""}function se(e,u){return e===u||e!==e&&u!==u}var Ie=Ye(function(){return arguments}())?Ye:function(e){return Ge(e)&&Se.call(e,"callee")&&!ft.call(e,"callee")},ge=Array.isArray;function Wt(e){return e!=null&&it(e.length)&&!$t(e)}var pe=tt||Gt;function bn(e,u){return je(e,u)}function $t(e){if(!Je(e))return!1;var u=We(e);return u==P||u==o||u==I||u==D}function it(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=p}function Je(e){var u=typeof e;return e!=null&&(u=="object"||u=="function")}function Ge(e){return e!=null&&typeof e=="object"}var _t=Qe?Ot(Qe):yn;function ot(e){return Wt(e)?dn(e):gn(e)}function On(){return[]}function Gt(){return!1}C.exports=bn}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],12:[function(k,C,v){(function(d){(function(){var g=k("lodash._reinterpolate"),_=k("lodash.templatesettings"),m=800,i=16,p=1/0,O=9007199254740991,S="[object Arguments]",I="[object Array]",y="[object AsyncFunction]",T="[object Boolean]",F="[object Date]",P="[object DOMException]",o="[object Error]",a="[object Function]",c="[object GeneratorFunction]",N="[object Map]",q="[object Number]",$="[object Null]",D="[object Object]",s="[object Proxy]",n="[object RegExp]",r="[object Set]",w="[object String]",x="[object Symbol]",f="[object Undefined]",E="[object WeakMap]",j="[object ArrayBuffer]",G="[object DataView]",K="[object Float32Array]",z="[object Float64Array]",J="[object Int8Array]",H="[object Int16Array]",X="[object Int32Array]",re="[object Uint8Array]",ee="[object Uint8ClampedArray]",h="[object Uint16Array]",M="[object Uint32Array]",U=/\b__p \+= '';/g,B=/\b(__p \+=) '' \+/g,L=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Q=/[\\^$.*+?()[\]{}|]/g,te=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ie=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,fe=/($^)/,be=/['\n\r\u2028\u2029\\]/g,ne={};ne[K]=ne[z]=ne[J]=ne[H]=ne[X]=ne[re]=ne[ee]=ne[h]=ne[M]=!0,ne[S]=ne[I]=ne[j]=ne[T]=ne[G]=ne[F]=ne[o]=ne[a]=ne[N]=ne[q]=ne[D]=ne[n]=ne[r]=ne[w]=ne[E]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qe=typeof d=="object"&&d&&d.Object===Object&&d,Oe=typeof self=="object"&&self&&self.Object===Object&&self,ye=Qe||Oe||Function("return this")(),Ee=typeof v=="object"&&v&&!v.nodeType&&v,ze=Ee&&typeof C=="object"&&C&&!C.nodeType&&C,Ot=ze&&ze.exports===Ee,at=Ot&&Qe.process,Et=function(){try{var t=ze&&ze.require&&ze.require("util").types;return t||at&&at.binding&&at.binding("util")}catch{}}(),St=Et&&Et.isTypedArray;function wt(t,b,A){switch(A.length){case 0:return t.call(b);case 1:return t.call(b,A[0]);case 2:return t.call(b,A[0],A[1]);case 3:return t.call(b,A[0],A[1],A[2])}return t.apply(b,A)}function Tt(t,b){for(var A=-1,V=t==null?0:t.length,oe=Array(V);++A<V;)oe[A]=b(t[A],A,t);return oe}function Qt(t,b){for(var A=-1,V=Array(t);++A<t;)V[A]=b(A);return V}function zt(t){return function(b){return t(b)}}function et(t,b){return Tt(b,function(A){return t[A]})}function st(t){return"\\"+Be[t]}function It(t,b){return t?.[b]}function Se(t,b){return function(A){return t(b(A))}}var Nt=Function.prototype,Fe=Object.prototype,ut=ye["__core-js_shared__"],He=Nt.toString,me=Fe.hasOwnProperty,ct=function(){var t=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ft=Fe.toString,Ht=He.call(Object),Le=RegExp("^"+He.call(me).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=Ot?ye.Buffer:void 0,tt=ye.Symbol,Vt=Se(Object.getPrototypeOf,Object),dt=Fe.propertyIsEnumerable,we=tt?tt.toStringTag:void 0,Ue=function(){try{var t=on(Object,"defineProperty");return t({},"",{}),t}catch{}}(),pt=lt?lt.isBuffer:void 0,ht=Se(Object.keys,Object),qe=Math.max,Yt=Date.now,Rt=tt?tt.prototype:void 0,xt=Rt?Rt.toString:void 0;function At(t,b){var A=kt(t),V=!A&&ln(t),oe=!A&&!V&&dn(t),le=!A&&!V&&!oe&&yn(t),de=A||V||oe||le,se=de?Qt(t.length,String):[],Ie=se.length;for(var ge in t)(b||me.call(t,ge))&&!(de&&(ge=="length"||oe&&(ge=="offset"||ge=="parent")||le&&(ge=="buffer"||ge=="byteLength"||ge=="byteOffset")||Lt(ge,Ie)))&&se.push(ge);return se}function Jt(t,b,A){var V=t[b];(!(me.call(t,b)&&gt(V,A))||A===void 0&&!(b in t))&&yt(t,b,A)}function yt(t,b,A){b=="__proto__"&&Ue?Ue(t,b,{configurable:!0,enumerable:!0,value:A,writable:!0}):t[b]=A}function De(t){return t==null?t===void 0?f:$:we&&we in Object(t)?Me(t):nt(t)}function Ce(t){return je(t)&&De(t)==S}function Xt(t){if(!Ye(t)||an(t))return!1;var b=Ft(t)?Le:ie;return b.test(fn(t))}function Zt(t){return je(t)&&We(t.length)&&!!ne[De(t)]}function en(t){if(!jt(t))return ht(t);var b=[];for(var A in Object(t))me.call(t,A)&&A!="constructor"&&b.push(A);return b}function tn(t){if(!Ye(t))return sn(t);var b=jt(t),A=[];for(var V in t)V=="constructor"&&(b||!me.call(t,V))||A.push(V);return A}function Dt(t,b){return cn(un(t,b,qt),t+"")}var xe=Ue?function(t,b){return Ue(t,"toString",{configurable:!0,enumerable:!1,value:$e(b),writable:!0})}:qt;function Ct(t){if(typeof t=="string")return t;if(kt(t))return Tt(t,Ct)+"";if(hn(t))return xt?xt.call(t):"";var b=t+"";return b=="0"&&1/t==-p?"-0":b}function nn(t,b,A,V){var oe=!A;A||(A={});for(var le=-1,de=b.length;++le<de;){var se=b[le],Ie=V?V(A[se],t[se],se,A,t):void 0;Ie===void 0&&(Ie=t[se]),oe?yt(A,se,Ie):Jt(A,se,Ie)}return A}function rn(t){return Dt(function(b,A){var V=-1,oe=A.length,le=oe>1?A[oe-1]:void 0,de=oe>2?A[2]:void 0;for(le=t.length>3&&typeof le=="function"?(oe--,le):void 0,de&&Mt(A[0],A[1],de)&&(le=oe<3?void 0:le,oe=1),b=Object(b);++V<oe;){var se=A[V];se&&t(b,se,V,le)}return b})}function Pt(t,b,A,V){return t===void 0||gt(t,Fe[A])&&!me.call(V,A)?b:t}function on(t,b){var A=It(t,b);return Xt(A)?A:void 0}function Me(t){var b=me.call(t,we),A=t[we];try{t[we]=void 0;var V=!0}catch{}var oe=ft.call(t);return V&&(b?t[we]=A:delete t[we]),oe}function Lt(t,b){var A=typeof t;return b=b??O,!!b&&(A=="number"||A!="symbol"&&Z.test(t))&&t>-1&&t%1==0&&t<b}function Mt(t,b,A){if(!Ye(A))return!1;var V=typeof b;return(V=="number"?vt(A)&&Lt(b,A.length):V=="string"&&b in A)?gt(A[b],t):!1}function an(t){return!!ct&&ct in t}function jt(t){var b=t&&t.constructor,A=typeof b=="function"&&b.prototype||Fe;return t===A}function sn(t){var b=[];if(t!=null)for(var A in Object(t))b.push(A);return b}function nt(t){return ft.call(t)}function un(t,b,A){return b=qe(b===void 0?t.length-1:b,0),function(){for(var V=arguments,oe=-1,le=qe(V.length-b,0),de=Array(le);++oe<le;)de[oe]=V[b+oe];oe=-1;for(var se=Array(b+1);++oe<b;)se[oe]=V[oe];return se[b]=A(de),wt(t,this,se)}}var cn=Pe(xe);function Pe(t){var b=0,A=0;return function(){var V=Yt(),oe=i-(V-A);if(A=V,oe>0){if(++b>=m)return arguments[0]}else b=0;return t.apply(void 0,arguments)}}function fn(t){if(t!=null){try{return He.call(t)}catch{}try{return t+""}catch{}}return""}function gt(t,b){return t===b||t!==t&&b!==b}var ln=Ce(function(){return arguments}())?Ce:function(t){return je(t)&&me.call(t,"callee")&&!dt.call(t,"callee")},kt=Array.isArray;function vt(t){return t!=null&&We(t.length)&&!Ft(t)}var dn=pt||_n;function Ve(t){if(!je(t))return!1;var b=De(t);return b==o||b==P||typeof t.message=="string"&&typeof t.name=="string"&&!pn(t)}function Ft(t){if(!Ye(t))return!1;var b=De(t);return b==a||b==c||b==y||b==s}function We(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=O}function Ye(t){var b=typeof t;return t!=null&&(b=="object"||b=="function")}function je(t){return t!=null&&typeof t=="object"}function pn(t){if(!je(t)||De(t)!=D)return!1;var b=Vt(t);if(b===null)return!0;var A=me.call(b,"constructor")&&b.constructor;return typeof A=="function"&&A instanceof A&&He.call(A)==Ht}function hn(t){return typeof t=="symbol"||je(t)&&De(t)==x}var yn=St?zt(St):Zt;function gn(t){return t==null?"":Ct(t)}var mt=rn(function(t,b,A,V){nn(b,mn(b),t,V)});function vn(t){return vt(t)?At(t):en(t)}function mn(t){return vt(t)?At(t,!0):tn(t)}function Ut(t,b,A){var V=_.imports._.templateSettings||_;A&&Mt(t,b,A)&&(b=void 0),t=gn(t),b=mt({},b,V,Pt);var oe=mt({},b.imports,V.imports,Pt),le=vn(oe),de=et(oe,le),se,Ie,ge=0,Wt=b.interpolate||fe,pe="__p += '",bn=RegExp((b.escape||fe).source+"|"+Wt.source+"|"+(Wt===g?te:fe).source+"|"+(b.evaluate||fe).source+"|$","g"),$t=me.call(b,"sourceURL")?"//# sourceURL="+(b.sourceURL+"").replace(/[\r\n]/g," ")+`
`:"";t.replace(bn,function(Ge,_t,ot,On,Gt,e){return ot||(ot=On),pe+=t.slice(ge,e).replace(be,st),_t&&(se=!0,pe+=`' +
__e(`+_t+`) +
'`),Gt&&(Ie=!0,pe+=`';
`+Gt+`;
__p += '`),ot&&(pe+=`' +
((__t = (`+ot+`)) == null ? '' : __t) +
'`),ge=e+Ge.length,Ge}),pe+=`';
`;var it=me.call(b,"variable")&&b.variable;it||(pe=`with (obj) {
`+pe+`
}
`),pe=(Ie?pe.replace(U,""):pe).replace(B,"$1").replace(L,"$1;"),pe="function("+(it||"obj")+`) {
`+(it?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(se?", __e = _.escape":"")+(Ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+pe+`return __p
}`;var Je=rt(function(){return Function(le,$t+"return "+pe).apply(void 0,de)});if(Je.source=pe,Ve(Je))throw Je;return Je}var rt=Dt(function(t,b){try{return wt(t,void 0,b)}catch(A){return Ve(A)?A:new Error(A)}});function $e(t){return function(){return t}}function qt(t){return t}function _n(){return!1}C.exports=Ut}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"lodash._reinterpolate":9,"lodash.templatesettings":13}],13:[function(k,C,v){(function(d){(function(){var g=k("lodash._reinterpolate"),_=1/0,m="[object Symbol]",i=/[&<>"'`]/g,p=RegExp(i.source),O=/<%-([\s\S]+?)%>/g,S=/<%([\s\S]+?)%>/g,I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},y=typeof d=="object"&&d&&d.Object===Object&&d,T=typeof self=="object"&&self&&self.Object===Object&&self,F=y||T||Function("return this")();function P(f){return function(E){return f?.[E]}}var o=P(I),a=Object.prototype,c=a.toString,N=F.Symbol,q=N?N.prototype:void 0,$=q?q.toString:void 0,D={escape:O,evaluate:S,interpolate:g,variable:"",imports:{_:{escape:x}}};function s(f){if(typeof f=="string")return f;if(r(f))return $?$.call(f):"";var E=f+"";return E=="0"&&1/f==-_?"-0":E}function n(f){return!!f&&typeof f=="object"}function r(f){return typeof f=="symbol"||n(f)&&c.call(f)==m}function w(f){return f==null?"":s(f)}function x(f){return f=w(f),f&&p.test(f)?f.replace(i,o):f}C.exports=D}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"lodash._reinterpolate":9}],14:[function(k,C,v){"use strict";const d=k("is-plain-obj"),{hasOwnProperty:g}=Object.prototype,{propertyIsEnumerable:_}=Object,m=(o,a,c)=>Object.defineProperty(o,a,{value:c,writable:!0,enumerable:!0,configurable:!0}),i=this,p={concatArrays:!1,ignoreUndefined:!1},O=o=>{const a=[];for(const c in o)g.call(o,c)&&a.push(c);if(Object.getOwnPropertySymbols){const c=Object.getOwnPropertySymbols(o);for(const N of c)_.call(o,N)&&a.push(N)}return a};function S(o){return Array.isArray(o)?I(o):d(o)?y(o):o}function I(o){const a=o.slice(0,0);return O(o).forEach(c=>{m(a,c,S(o[c]))}),a}function y(o){const a=Object.getPrototypeOf(o)===null?Object.create(null):{};return O(o).forEach(c=>{m(a,c,S(o[c]))}),a}const T=(o,a,c,N)=>(c.forEach(q=>{typeof a[q]>"u"&&N.ignoreUndefined||(q in o&&o[q]!==Object.getPrototypeOf(o)?m(o,q,P(o[q],a[q],N)):m(o,q,S(a[q])))}),o),F=(o,a,c)=>{let N=o.slice(0,0),q=0;return[o,a].forEach($=>{const D=[];for(let s=0;s<$.length;s++)g.call($,s)&&(D.push(String(s)),$===o?m(N,q++,$[s]):m(N,q++,S($[s])));N=T(N,$,O($).filter(s=>!D.includes(s)),c)}),N};function P(o,a,c){return c.concatArrays&&Array.isArray(o)&&Array.isArray(a)?F(o,a,c):!d(a)||!d(o)?S(a):T(o,a,O(a),c)}C.exports=function(...o){const a=P(S(p),this!==i&&this||{},p);let c={_:{}};for(const N of o)if(N!==void 0){if(!d(N))throw new TypeError("`"+N+"` is not an Option Object");c=P(c,{_:N},a)}return c._}},{"is-plain-obj":15}],15:[function(k,C,v){"use strict";C.exports=d=>{if(Object.prototype.toString.call(d)!=="[object Object]")return!1;const g=Object.getPrototypeOf(d);return g===null||g===Object.prototype}},{}],16:[function(k,C,v){var d=C.exports={},g,_;function m(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?g=setTimeout:g=m}catch{g=m}try{typeof clearTimeout=="function"?_=clearTimeout:_=i}catch{_=i}})();function p(c){if(g===setTimeout)return setTimeout(c,0);if((g===m||!g)&&setTimeout)return g=setTimeout,setTimeout(c,0);try{return g(c,0)}catch{try{return g.call(null,c,0)}catch{return g.call(this,c,0)}}}function O(c){if(_===clearTimeout)return clearTimeout(c);if((_===i||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(c);try{return _(c)}catch{try{return _.call(null,c)}catch{return _.call(this,c)}}}var S=[],I=!1,y,T=-1;function F(){!I||!y||(I=!1,y.length?S=y.concat(S):T=-1,S.length&&P())}function P(){if(!I){var c=p(F);I=!0;for(var N=S.length;N;){for(y=S,S=[];++T<N;)y&&y[T].run();T=-1,N=S.length}y=null,I=!1,O(c)}}d.nextTick=function(c){var N=new Array(arguments.length-1);if(arguments.length>1)for(var q=1;q<arguments.length;q++)N[q-1]=arguments[q];S.push(new o(c,N)),S.length===1&&!I&&p(P)};function o(c,N){this.fun=c,this.array=N}o.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={};function a(){}d.on=a,d.addListener=a,d.once=a,d.off=a,d.removeListener=a,d.removeAllListeners=a,d.emit=a,d.prependListener=a,d.prependOnceListener=a,d.listeners=function(c){return[]},d.binding=function(c){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(c){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],17:[function(k,C,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;function d(m){var i=function(O){var S=O.dispatch,I=O.getState;return function(y){return function(T){return typeof T=="function"?T(S,I,m):y(T)}}};return i}var g=d();g.withExtraArgument=d;var _=g;v.default=_},{}],18:[function(k,C,v){(function(d){(function(){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var g=k("@babel/runtime/helpers/objectSpread2");function _(f){return f&&typeof f=="object"&&"default"in f?f:{default:f}}var m=_(g);function i(f){return"Minified Redux error #"+f+"; visit https://redux.js.org/Errors?code="+f+" for the full message or use the non-minified dev environment for full errors. "}var p=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),O=function(){return Math.random().toString(36).substring(7).split("").join(".")},S={INIT:"@@redux/INIT"+O(),REPLACE:"@@redux/REPLACE"+O(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+O()}};function I(f){if(typeof f!="object"||f===null)return!1;for(var E=f;Object.getPrototypeOf(E)!==null;)E=Object.getPrototypeOf(E);return Object.getPrototypeOf(f)===E}function y(f){if(f===void 0)return"undefined";if(f===null)return"null";var E=typeof f;switch(E){case"boolean":case"string":case"number":case"symbol":case"function":return E}if(Array.isArray(f))return"array";if(P(f))return"date";if(F(f))return"error";var j=T(f);switch(j){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return j}return E.slice(8,-1).toLowerCase().replace(/\s/g,"")}function T(f){return typeof f.constructor=="function"?f.constructor.name:null}function F(f){return f instanceof Error||typeof f.message=="string"&&f.constructor&&typeof f.constructor.stackTraceLimit=="number"}function P(f){return f instanceof Date?!0:typeof f.toDateString=="function"&&typeof f.getDate=="function"&&typeof f.setDate=="function"}function o(f){var E=typeof f;return d.env.NODE_ENV!=="production"&&(E=y(f)),E}function a(f,E,j){var G;if(typeof E=="function"&&typeof j=="function"||typeof j=="function"&&typeof arguments[3]=="function")throw new Error(d.env.NODE_ENV==="production"?i(0):"It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if(typeof E=="function"&&typeof j>"u"&&(j=E,E=void 0),typeof j<"u"){if(typeof j!="function")throw new Error(d.env.NODE_ENV==="production"?i(1):"Expected the enhancer to be a function. Instead, received: '"+o(j)+"'");return j(a)(f,E)}if(typeof f!="function")throw new Error(d.env.NODE_ENV==="production"?i(2):"Expected the root reducer to be a function. Instead, received: '"+o(f)+"'");var K=f,z=E,J=[],H=J,X=!1;function re(){H===J&&(H=J.slice())}function ee(){if(X)throw new Error(d.env.NODE_ENV==="production"?i(3):"You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return z}function h(L){if(typeof L!="function")throw new Error(d.env.NODE_ENV==="production"?i(4):"Expected the listener to be a function. Instead, received: '"+o(L)+"'");if(X)throw new Error(d.env.NODE_ENV==="production"?i(5):"You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");var Q=!0;return re(),H.push(L),function(){if(Q){if(X)throw new Error(d.env.NODE_ENV==="production"?i(6):"You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");Q=!1,re();var ie=H.indexOf(L);H.splice(ie,1),J=null}}}function M(L){if(!I(L))throw new Error(d.env.NODE_ENV==="production"?i(7):"Actions must be plain objects. Instead, the actual type was: '"+o(L)+"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.");if(typeof L.type>"u")throw new Error(d.env.NODE_ENV==="production"?i(8):'Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(X)throw new Error(d.env.NODE_ENV==="production"?i(9):"Reducers may not dispatch actions.");try{X=!0,z=K(z,L)}finally{X=!1}for(var Q=J=H,te=0;te<Q.length;te++){var ie=Q[te];ie()}return L}function U(L){if(typeof L!="function")throw new Error(d.env.NODE_ENV==="production"?i(10):"Expected the nextReducer to be a function. Instead, received: '"+o(L));K=L,M({type:S.REPLACE})}function B(){var L,Q=h;return L={subscribe:function(ie){if(typeof ie!="object"||ie===null)throw new Error(d.env.NODE_ENV==="production"?i(11):"Expected the observer to be an object. Instead, received: '"+o(ie)+"'");function Z(){ie.next&&ie.next(ee())}Z();var fe=Q(Z);return{unsubscribe:fe}}},L[p]=function(){return this},L}return M({type:S.INIT}),G={dispatch:M,subscribe:h,getState:ee,replaceReducer:U},G[p]=B,G}var c=a;function N(f){typeof console<"u"&&typeof console.error=="function"&&console.error(f);try{throw new Error(f)}catch{}}function q(f,E,j,G){var K=Object.keys(E),z=j&&j.type===S.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(K.length===0)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!I(f))return"The "+z+' has unexpected type of "'+o(f)+'". Expected argument to be an object with the following '+('keys: "'+K.join('", "')+'"');var J=Object.keys(f).filter(function(H){return!E.hasOwnProperty(H)&&!G[H]});if(J.forEach(function(H){G[H]=!0}),!(j&&j.type===S.REPLACE)&&J.length>0)return"Unexpected "+(J.length>1?"keys":"key")+" "+('"'+J.join('", "')+'" found in '+z+". ")+"Expected to find one of the known reducer keys instead: "+('"'+K.join('", "')+'". Unexpected keys will be ignored.')}function $(f){Object.keys(f).forEach(function(E){var j=f[E],G=j(void 0,{type:S.INIT});if(typeof G>"u")throw new Error(d.env.NODE_ENV==="production"?i(12):'The slice reducer for key "'+E+`" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.`);if(typeof j(void 0,{type:S.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(d.env.NODE_ENV==="production"?i(13):'The slice reducer for key "'+E+'" returned undefined when probed with a random type. '+("Don't try to handle '"+S.INIT+`' or other actions in "redux/*" `)+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.")})}function D(f){for(var E=Object.keys(f),j={},G=0;G<E.length;G++){var K=E[G];d.env.NODE_ENV!=="production"&&typeof f[K]>"u"&&N('No reducer provided for key "'+K+'"'),typeof f[K]=="function"&&(j[K]=f[K])}var z=Object.keys(j),J;d.env.NODE_ENV!=="production"&&(J={});var H;try{$(j)}catch(X){H=X}return function(re,ee){if(re===void 0&&(re={}),H)throw H;if(d.env.NODE_ENV!=="production"){var h=q(re,j,ee,J);h&&N(h)}for(var M=!1,U={},B=0;B<z.length;B++){var L=z[B],Q=j[L],te=re[L],ie=Q(te,ee);if(typeof ie>"u"){var Z=ee&&ee.type;throw new Error(d.env.NODE_ENV==="production"?i(14):"When called with an action of type "+(Z?'"'+String(Z)+'"':"(unknown type)")+', the slice reducer for key "'+L+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.')}U[L]=ie,M=M||ie!==te}return M=M||z.length!==Object.keys(re).length,M?U:re}}function s(f,E){return function(){return E(f.apply(this,arguments))}}function n(f,E){if(typeof f=="function")return s(f,E);if(typeof f!="object"||f===null)throw new Error(d.env.NODE_ENV==="production"?i(16):"bindActionCreators expected an object or a function, but instead received: '"+o(f)+`'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?`);var j={};for(var G in f){var K=f[G];typeof K=="function"&&(j[G]=s(K,E))}return j}function r(){for(var f=arguments.length,E=new Array(f),j=0;j<f;j++)E[j]=arguments[j];return E.length===0?function(G){return G}:E.length===1?E[0]:E.reduce(function(G,K){return function(){return G(K.apply(void 0,arguments))}})}function w(){for(var f=arguments.length,E=new Array(f),j=0;j<f;j++)E[j]=arguments[j];return function(G){return function(){var K=G.apply(void 0,arguments),z=function(){throw new Error(d.env.NODE_ENV==="production"?i(15):"Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},J={getState:K.getState,dispatch:function(){return z.apply(void 0,arguments)}},H=E.map(function(X){return X(J)});return z=r.apply(void 0,H)(K.dispatch),m.default(m.default({},K),{},{dispatch:z})}}}function x(){}d.env.NODE_ENV!=="production"&&typeof x.name=="string"&&x.name!=="isCrushed"&&N('You are currently using minified code outside of NODE_ENV === "production". This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) to ensure you have the correct code for your production build.'),v.__DO_NOT_USE__ActionTypes=S,v.applyMiddleware=w,v.bindActionCreators=n,v.combineReducers=D,v.compose=r,v.createStore=a,v.legacy_createStore=c}).call(this)}).call(this,k("_process"))},{"@babel/runtime/helpers/objectSpread2":2,_process:16}],19:[function(k,C,v){"use strict";var d=k("./src/suggestions");C.exports=d,typeof window<"u"&&(window.Suggestions=d)},{"./src/suggestions":21}],20:[function(k,C,v){"use strict";var d=function(g){return this.component=g,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,g.el.parentNode.insertBefore(this.wrapper,g.el.nextSibling),this};d.prototype.show=function(){this.element.style.display="block"},d.prototype.hide=function(){this.element.style.display="none"},d.prototype.add=function(g){this.items.push(g)},d.prototype.clear=function(){this.items=[],this.active=0},d.prototype.isEmpty=function(){return!this.items.length},d.prototype.isVisible=function(){return this.element.style.display==="block"},d.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var g=0;g<this.items.length;g++)this.drawItem(this.items[g],this.active===g);this.show()},d.prototype.drawItem=function(g,_){var m=document.createElement("li"),i=document.createElement("a");_&&(m.className+=" active"),i.innerHTML=g.string,m.appendChild(i),this.element.appendChild(m),m.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),m.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,g)}).bind(this))},d.prototype.handleMouseUp=function(g){this.selectingListItem=!1,this.component.value(g.original),this.clear(),this.draw()},d.prototype.move=function(g){this.active=g,this.draw()},d.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)},d.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},d.prototype.drawError=function(g){var _=document.createElement("li");_.innerHTML=g,this.element.appendChild(_),this.show()},C.exports=d},{}],21:[function(k,C,v){"use strict";var d=k("xtend"),g=k("fuzzy"),_=k("./list"),m=function(i,p,O){return O=O||{},this.options=d({minLength:2,limit:5,filter:!0,hideOnBlur:!0},O),this.el=i,this.data=p||[],this.list=new _(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(S){this.handleKeyUp(S.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(S){this.handleKeyDown(S)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(S){this.handlePaste(S)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};m.prototype.handleKeyUp=function(i){i===40||i===38||i===27||i===13||i===9||this.handleInputChange(this.el.value)},m.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},m.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},m.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var p=this;setTimeout(function(){p.handleInputChange(i.target.value)},100)}},m.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(p){for(var O=0;O<p.length&&(this.list.add(p[O]),O!==this.options.limit-1);O++);this.list.draw()}).bind(this))},m.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},m.prototype.update=function(i){this.data=i,this.handleKeyUp()},m.prototype.clear=function(){this.data=[],this.list.clear()},m.prototype.normalize=function(i){return i=i.toLowerCase(),i},m.prototype.match=function(i,p){return i.indexOf(p)>-1},m.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i),document.createEvent){var p=document.createEvent("HTMLEvents");p.initEvent("change",!0,!1),this.el.dispatchEvent(p)}else this.el.fireEvent("onchange")},m.prototype.getCandidates=function(i){var p={pre:"<strong>",post:"</strong>",extract:(function(S){return this.getItemValue(S)}).bind(this)},O;this.options.filter?(O=g.filter(this.query,this.data,p),O=O.map((function(S){return{original:S.original,string:this.render(S.original,S.string)}}).bind(this))):O=this.data.map((function(S){var I=this.render(S);return{original:S,string:I}}).bind(this)),i(O)},m.prototype.getItemValue=function(i){return i},m.prototype.render=function(i,p){if(p)return p;for(var O=i.original?this.getItemValue(i.original):this.getItemValue(i),S=this.normalize(O),I=S.lastIndexOf(this.query);I>-1;){var y=I+this.query.length;O=O.slice(0,I)+"<strong>"+O.slice(I,y)+"</strong>"+O.slice(y),I=S.slice(0,I).lastIndexOf(this.query)}return O},m.prototype.renderError=function(i){this.list.drawError(i)},C.exports=m},{"./list":20,fuzzy:8,xtend:24}],22:[function(k,C,v){var d=k("turf-meta").coordEach;C.exports=function(g){var _=[1/0,1/0,-1/0,-1/0];return d(g,function(m){_[0]>m[0]&&(_[0]=m[0]),_[1]>m[1]&&(_[1]=m[1]),_[2]<m[0]&&(_[2]=m[0]),_[3]<m[1]&&(_[3]=m[1])}),_}},{"turf-meta":23}],23:[function(k,C,v){function d(i,p,O){var S,I,y,T,F,P,o,a,c=0,N,q=i.type==="FeatureCollection",$=i.type==="Feature",D=q?i.features.length:1;for(S=0;S<D;S++)for(a=q?i.features[S].geometry:$?i.geometry:i,N=a.type==="GeometryCollection",P=N?a.geometries.length:1,T=0;T<P;T++)if(F=N?a.geometries[T]:a,o=F.coordinates,c=O&&(F.type==="Polygon"||F.type==="MultiPolygon")?1:0,F.type==="Point")p(o);else if(F.type==="LineString"||F.type==="MultiPoint")for(I=0;I<o.length;I++)p(o[I]);else if(F.type==="Polygon"||F.type==="MultiLineString")for(I=0;I<o.length;I++)for(y=0;y<o[I].length-c;y++)p(o[I][y]);else if(F.type==="MultiPolygon")for(I=0;I<o.length;I++)for(y=0;y<o[I].length;y++)for(l=0;l<o[I][y].length-c;l++)p(o[I][y][l]);else throw new Error("Unknown Geometry Type")}C.exports.coordEach=d;function g(i,p,O,S){return d(i,function(I){O=p(O,I)},S),O}C.exports.coordReduce=g;function _(i,p){var O;switch(i.type){case"FeatureCollection":for(features=i.features,O=0;O<i.features.length;O++)p(i.features[O].properties);break;case"Feature":p(i.properties);break}}C.exports.propEach=_;function m(i,p,O){return _(i,function(S){O=p(O,S)}),O}C.exports.propReduce=m},{}],24:[function(k,C,v){C.exports=g;var d=Object.prototype.hasOwnProperty;function g(){for(var _={},m=0;m<arguments.length;m++){var i=arguments[m];for(var p in i)d.call(i,p)&&(_[p]=i[p])}return _}},{}],25:[function(k,C,v){"use strict";function d(h){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},d(h)}Object.defineProperty(v,"__esModule",{value:!0}),v.addWaypoint=J,v.clearDestination=n,v.clearOrigin=s,v.createDestination=E,v.createOrigin=f,v.eventEmit=ee,v.eventSubscribe=re,v.hoverMarker=w,v.queryDestination=q,v.queryDestinationCoordinates=D,v.queryOrigin=N,v.queryOriginCoordinates=$,v.removeWaypoint=X,v.reverse=G,v.setDestinationFromCoordinates=z,v.setOptions=r,v.setOriginFromCoordinates=K,v.setProfile=j,v.setRouteIndex=x,v.setWaypoint=H;var g=p(k("../constants/action_types")),_=m(k("../utils"));function m(h){return h&&h.__esModule?h:{default:h}}function i(h){if(typeof WeakMap!="function")return null;var M=new WeakMap,U=new WeakMap;return(i=function(L){return L?U:M})(h)}function p(h,M){if(!M&&h&&h.__esModule)return h;if(h===null||d(h)!=="object"&&typeof h!="function")return{default:h};var U=i(M);if(U&&U.has(h))return U.get(h);var B={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in h)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(h,Q)){var te=L?Object.getOwnPropertyDescriptor(h,Q):null;te&&(te.get||te.set)?Object.defineProperty(B,Q,te):B[Q]=h[Q]}return B.default=h,U&&U.set(h,B),B}function O(h){return function(M){var U=_.default.createPoint(h,{id:"origin","marker-symbol":"A"});M({type:g.ORIGIN,origin:U}),M(ee("origin",{feature:U}))}}function S(h){return function(M){var U=_.default.createPoint(h,{id:"destination","marker-symbol":"B"});M({type:g.DESTINATION,destination:U}),M(ee("destination",{feature:U}))}}function I(h){return function(M){M({type:g.DIRECTIONS_REQUEST_START,request:h})}}function y(h){return function(M){M({type:g.DIRECTIONS,directions:h}),M(ee("route",{route:h}))}}function T(h){return{type:g.WAYPOINTS,waypoints:h}}function F(h){return{type:g.HOVER_MARKER,hoverMarker:h}}function P(){return function(h,M){var U=M(),B=U.api,L=U.accessToken,Q=U.routeIndex,te=U.profile,ie=U.alternatives,Z=U.congestion,fe=U.destination,be=U.language,ne=U.exclude,Be=U.fetchDirectionsRequest;if(fe&&fe.geometry){Be&&Be.abort();var Qe=o(M),Oe=[];Oe.push("geometries=polyline"),ie&&Oe.push("alternatives=true"),Z&&Oe.push("annotations=congestion"),Oe.push("steps=true"),Oe.push("overview=full"),be&&Oe.push("language="+be),ne&&Oe.push("exclude="+ne),L&&Oe.push("access_token="+L);var ye=new XMLHttpRequest;ye.open("GET","".concat(B).concat(te,"/").concat(Qe,".json?").concat(Oe.join("&")),!0),h(I(ye)),ye.onload=function(){if(ye.status>=200&&ye.status<400){var Ee=JSON.parse(ye.responseText);if(Ee.error)return h(y([])),h(c(Ee.error));if(Ee.message==="No route found")return h(c("No route found"));h(c(null)),Ee.routes[Q]||h(x(0)),h(y(Ee.routes)),h(O(Ee.waypoints[0].location)),h(S(Ee.waypoints[Ee.waypoints.length-1].location))}else return h(y([])),h(c(JSON.parse(ye.responseText).message))},ye.onerror=function(){return h(y([])),ye.responseText?h(c(JSON.parse(ye.responseText).message)):h(c("Error"))},ye.send()}}}function o(h){var M=h(),U=M.origin,B=M.destination,L=M.waypoints,Q=[];return Q.push(U.geometry.coordinates.join(",")),Q.push(";"),L.length&&L.forEach(function(te){Q.push(te.geometry.coordinates.join(",")),Q.push(";")}),Q.push(B.geometry.coordinates.join(",")),encodeURIComponent(Q.join(""))}function a(h){var M={id:"waypoint"};return Object.assign(h,{properties:h.properties?Object.assign(h.properties,M):M})}function c(h){return function(M){M({type:"ERROR",error:h}),h&&M(ee("error",{error:h}))}}function N(h){return{type:g.ORIGIN_QUERY,query:h}}function q(h){return{type:g.DESTINATION_QUERY,query:h}}function $(h){return{type:g.ORIGIN_FROM_COORDINATES,coordinates:h}}function D(h){return{type:g.DESTINATION_FROM_COORDINATES,coordinates:h}}function s(){return function(h){h({type:g.ORIGIN_CLEAR}),h(ee("clear",{type:"origin"})),h(c(null))}}function n(){return function(h,M){var U=M(),B=U.fetchDirectionsRequest;B&&B.abort(),h({type:g.DESTINATION_CLEAR}),h(ee("clear",{type:"destination"})),h(c(null))}}function r(h){return{type:g.SET_OPTIONS,options:h}}function w(h){return function(M){var U=h?_.default.createPoint(h,{id:"hover"}):{};M(F(U))}}function x(h){return{type:g.ROUTE_INDEX,routeIndex:h}}function f(h){return function(M,U){var B=U(),L=B.destination;M(O(h)),L.geometry&&M(P())}}function E(h){return function(M,U){var B=U(),L=B.origin;M(S(h)),L.geometry&&M(P())}}function j(h){return function(M,U){var B=U(),L=B.origin,Q=B.destination;M({type:g.DIRECTIONS_PROFILE,profile:h}),M(ee("profile",{profile:h})),L.geometry&&Q.geometry&&M(P())}}function G(){return function(h,M){var U=M();U.destination.geometry&&h(O(U.destination.geometry.coordinates)),U.origin.geometry&&h(S(U.origin.geometry.coordinates)),U.origin.geometry&&U.destination.geometry&&h(P());for(var B=document.getElementsByClassName("suggestions"),L=0;L<B.length;L++)B[L].style.visibility="hidden"}}function K(h){return function(M){if(_.default.validCoords(h)||(h=[_.default.wrap(h[0]),_.default.wrap(h[1])]),isNaN(h[0])&&isNaN(h[1]))return M(c(new Error("Coordinates are not valid")));M($(h)),M(f(h))}}function z(h){return function(M){if(_.default.validCoords(h)||(h=[_.default.wrap(h[0]),_.default.wrap(h[1])]),isNaN(h[0])&&isNaN(h[1]))return M(c(new Error("Coordinates are not valid")));M(E(h)),M(D(h))}}function J(h,M){return function(U,B){var L=B(),Q=L.destination,te=L.waypoints;te.splice(h,0,a(M)),U(T(te)),Q.geometry&&U(P())}}function H(h,M){return function(U,B){var L=B(),Q=L.destination,te=L.waypoints;te[h]=a(M),U(T(te)),Q.geometry&&U(P())}}function X(h){return function(M,U){var B=U(),L=B.destination,Q=B.waypoints;Q=Q.filter(function(te){return!_.default.coordinateMatch(te,h)}),M(T(Q)),L.geometry&&M(P())}}function re(h,M){return function(U,B){var L=B(),Q=L.events;return Q[h]=Q[h]||[],Q[h].push(M),{type:g.EVENTS,events:Q}}}function ee(h,M){var U=this;return function(B,L){var Q=L(),te=Q.events;if(!te[h])return{type:g.EVENTS,events:te};for(var ie=te[h].slice(),Z=0;Z<ie.length;Z++)ie[Z].call(U,M)}}},{"../constants/action_types":26,"../utils":34}],26:[function(k,C,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.WAYPOINTS=v.SET_OPTIONS=v.ROUTE_INDEX=v.ORIGIN_QUERY=v.ORIGIN_FROM_COORDINATES=v.ORIGIN_CLEAR=v.ORIGIN=v.HOVER_MARKER=v.EVENTS=v.ERROR=v.DIRECTIONS_REQUEST_START=v.DIRECTIONS_PROFILE=v.DIRECTIONS=v.DESTINATION_QUERY=v.DESTINATION_FROM_COORDINATES=v.DESTINATION_CLEAR=v.DESTINATION=void 0;var d="DESTINATION";v.DESTINATION=d;var g="DESTINATION_CLEAR";v.DESTINATION_CLEAR=g;var _="DESTINATION_QUERY";v.DESTINATION_QUERY=_;var m="DESTINATION_FROM_COORDINATES";v.DESTINATION_FROM_COORDINATES=m;var i="DIRECTIONS";v.DIRECTIONS=i;var p="DIRECTIONS_REQUEST_START";v.DIRECTIONS_REQUEST_START=p;var O="DIRECTIONS_PROFILE";v.DIRECTIONS_PROFILE=O;var S="EVENTS";v.EVENTS=S;var I="ERROR";v.ERROR=I;var y="HOVER_MARKER";v.HOVER_MARKER=y;var T="ORIGIN";v.ORIGIN=T;var F="ORIGIN_CLEAR";v.ORIGIN_CLEAR=F;var P="ORIGIN_QUERY";v.ORIGIN_QUERY=P;var o="ORIGIN_FROM_COORDINATES";v.ORIGIN_FROM_COORDINATES=o;var a="ROUTE_INDEX";v.ROUTE_INDEX=a;var c="SET_OPTIONS";v.SET_OPTIONS=c;var N="WAYPOINTS";v.WAYPOINTS=N},{}],27:[function(k,C,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var d=i(k("suggestions")),g=i(k("lodash.debounce")),_=k("events"),m=i(k("../utils"));function i(P){return P&&P.__esModule?P:{default:P}}function p(P){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},p(P)}function O(P,o){if(!(P instanceof o))throw new TypeError("Cannot call a class as a function")}function S(P,o){for(var a=0;a<o.length;a++){var c=o[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(P,y(c.key),c)}}function I(P,o,a){return o&&S(P.prototype,o),a&&S(P,a),Object.defineProperty(P,"prototype",{writable:!1}),P}function y(P){var o=T(P,"string");return p(o)==="symbol"?o:String(o)}function T(P,o){if(p(P)!=="object"||P===null)return P;var a=P[Symbol.toPrimitive];if(a!==void 0){var c=a.call(P,o||"default");if(p(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(P)}var F=function(){function P(o){O(this,P),this._ev=new _.EventEmitter,this.options=o,this.api=o&&o.api||"https://api.mapbox.com/geocoding/v5/mapbox.places/"}return I(P,[{key:"onAdd",value:function(a){this._map=a,this.request=new XMLHttpRequest;var c=document.createElement("div");c.className="mapboxgl-ctrl-geocoder";var N=document.createElement("span");N.className="geocoder-icon geocoder-icon-search";var q=this._inputEl=document.createElement("input");q.type="text",q.placeholder=this.options.placeholder,q.addEventListener("keydown",(0,g.default)((function(n){if(!n.target.value)return this._clearEl.classList.remove("active");n.metaKey||[9,27,37,39,13,38,40].indexOf(n.keyCode)!==-1||this._queryFromInput(n.target.value)}).bind(this)),200),q.addEventListener("change",(function(n){n.target.value&&this._clearEl.classList.add("active");var r=this._typeahead.selected;if(r){if(this.options.flyTo)if(r.bbox&&r.context&&r.context.length<=3||r.bbox&&!r.context){var w=r.bbox;a.fitBounds([[w[0],w[1]],[w[2],w[3]]])}else a.flyTo({center:r.center,zoom:this.options.zoom});this._input=r,this.fire("result",{result:r})}}).bind(this));var $=document.createElement("div");$.classList.add("geocoder-pin-right");var D=this._clearEl=document.createElement("button");D.className="geocoder-icon geocoder-icon-close",D.addEventListener("click",this._clear.bind(this));var s=this._loadingEl=document.createElement("span");return s.className="geocoder-icon geocoder-icon-loading",$.appendChild(D),$.appendChild(s),c.appendChild(N),c.appendChild(q),c.appendChild($),this.options.container&&(this.options.position=!1),this._typeahead=new d.default(q,[],{filter:!1}),this._typeahead.getItemValue=function(n){return n.place_name},c}},{key:"_geocode",value:function(a,c){this._loadingEl.classList.add("active"),this.fire("loading");var N=this.options,q=["placeholder","zoom","flyTo","accessToken","api"],$=Object.keys(this.options).filter(function(s){return q.indexOf(s)===-1}).map(function(s){return s+"="+N[s]}),D=this.options.accessToken?this.options.accessToken:mapboxgl.accessToken;$.push("access_token="+D),this.request.abort(),this.request.open("GET",this.api+encodeURIComponent(a.trim())+".json?"+$.join("&"),!0),this.request.onload=(function(){if(this._loadingEl.classList.remove("active"),this.request.status>=200&&this.request.status<400){var s=JSON.parse(this.request.responseText);return s.features.length?this._clearEl.classList.add("active"):(this._clearEl.classList.remove("active"),this._typeahead.selected=null),this.fire("results",{results:s.features}),this._typeahead.update(s.features),c(s.features)}else this.fire("error",{error:JSON.parse(this.request.responseText).message})}).bind(this),this.request.onerror=(function(){this._loadingEl.classList.remove("active"),this.fire("error",{error:JSON.parse(this.request.responseText).message})}).bind(this),this.request.send()}},{key:"_queryFromInput",value:function(a){a=a.trim(),a||this._clear(),a.length>2&&this._geocode(a,(function(c){this._results=c}).bind(this))}},{key:"_change",value:function(){var a=document.createEvent("HTMLEvents");a.initEvent("change",!0,!1),this._inputEl.dispatchEvent(a)}},{key:"_query",value:function(a){a&&(p(a)==="object"&&a.length&&(a=[m.default.wrap(a[0]),m.default.wrap(a[1])].join()),this._geocode(a,(function(c){if(c.length){var N=c[0];this._results=c,this._typeahead.selected=N,this._inputEl.value=N.place_name,this._change()}}).bind(this)))}},{key:"_setInput",value:function(a){a&&(p(a)==="object"&&a.length&&(a=[m.default.roundWithOriginalPrecision(m.default.wrap(a[0]),a[0]),m.default.roundWithOriginalPrecision(m.default.wrap(a[1]),a[1])].join()),this._inputEl.value=a,this._input=null,this._typeahead.selected=null,this._typeahead.clear(),this._change())}},{key:"_clear",value:function(){this._input=null,this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._change(),this._inputEl.focus(),this._clearEl.classList.remove("active"),this.fire("clear")}},{key:"getResult",value:function(){return this._input}},{key:"query",value:function(a){return this._query(a),this}},{key:"setInput",value:function(a){return this._setInput(a),this}},{key:"on",value:function(a,c){return this._ev.on(a,c),this._ev.on("error",function(N){console.log(N)}),this}},{key:"fire",value:function(a,c){return this._ev.emit(a,c),this}},{key:"off",value:function(a,c){return this._ev.removeListener(a,c),this}}]),P}();v.default=F},{"../utils":34,events:7,"lodash.debounce":10,suggestions:19}],28:[function(k,C,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var d=i(k("./geocoder")),g=i(k("lodash.template")),_=i(k("lodash.isequal")),m=i(k("turf-extent"));function i(o){return o&&o.__esModule?o:{default:o}}function p(o){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},p(o)}function O(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}function S(o,a){for(var c=0;c<a.length;c++){var N=a[c];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(o,y(N.key),N)}}function I(o,a,c){return a&&S(o.prototype,a),c&&S(o,c),Object.defineProperty(o,"prototype",{writable:!1}),o}function y(o){var a=T(o,"string");return p(a)==="symbol"?a:String(a)}function T(o,a){if(p(o)!=="object"||o===null)return o;var c=o[Symbol.toPrimitive];if(c!==void 0){var N=c.call(o,a||"default");if(p(N)!=="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(o)}var F=(0,g.default)(`<div class='mapbox-directions-component mapbox-directions-inputs'>
  <div class='mapbox-directions-component-keyline'>
    <div class='mapbox-directions-origin'>
      <label class='mapbox-form-label'>
        <span class='directions-icon directions-icon-depart'></span>
      </label>
      <div id='mapbox-directions-origin-input'></div>
    </div>

    <button
      class='directions-icon directions-icon-reverse directions-reverse js-reverse-inputs'
      title='Reverse origin &amp; destination'>
    </button>

    <div class='mapbox-directions-destination'>
      <label class='mapbox-form-label'>
        <span class='directions-icon directions-icon-arrive'></span>
      </label>
      <div id='mapbox-directions-destination-input'></div>
    </div>
  </div>

  <% if (controls.profileSwitcher) { %>
  <div class='mapbox-directions-profile mapbox-directions-component-keyline mapbox-directions-clearfix'><input
      id='mapbox-directions-profile-driving-traffic'
      type='radio'
      name='profile'
      value='mapbox/driving-traffic'
      <% if (profile === 'mapbox/driving-traffic') { %>checked<% } %>
    />
    <label for='mapbox-directions-profile-driving-traffic'>Traffic</label>
    <input
      id='mapbox-directions-profile-driving'
      type='radio'
      name='profile'
      value='mapbox/driving'
      <% if (profile === 'mapbox/driving') { %>checked<% } %>
    />
    <label for='mapbox-directions-profile-driving'>Driving</label>
    <input
      id='mapbox-directions-profile-walking'
      type='radio'
      name='profile'
      value='mapbox/walking'
      <% if (profile === 'mapbox/walking') { %>checked<% } %>
    />
    <label for='mapbox-directions-profile-walking'>Walking</label>
    <input
      id='mapbox-directions-profile-cycling'
      type='radio'
      name='profile'
      value='mapbox/cycling'
      <% if (profile === 'mapbox/cycling') { %>checked<% } %>
    />
    <label for='mapbox-directions-profile-cycling'>Cycling</label>
  </div>
  <% } %>
</div>
`),P=function(){function o(a,c,N,q){O(this,o);var $=c.getState(),D=$.originQuery,s=$.destinationQuery,n=$.profile,r=$.controls;a.innerHTML=F({originQuery:D,destinationQuery:s,profile:n,controls:r}),this.container=a,this.actions=N,this.store=c,this._map=q,this.onAdd(),this.render()}return I(o,[{key:"animateToCoordinates",value:function(c,N){var q=this.store.getState(),$=q.origin,D=q.destination,s=q.routePadding;if($.geometry&&D.geometry&&!(0,_.default)($.geometry,D.geometry)){var n=(0,m.default)({type:"FeatureCollection",features:[$,D]});this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],{padding:s})}else this._map.flyTo({center:N})}},{key:"onAdd",value:function(){var c=this,N=this.actions,q=N.clearOrigin,$=N.clearDestination,D=N.createOrigin,s=N.createDestination,n=N.setProfile,r=N.reverse,w=this.store.getState(),x=w.geocoder,f=w.accessToken,E=w.flyTo,j=w.placeholderOrigin,G=w.placeholderDestination,K=w.zoom;this.originInput=new d.default(Object.assign({},{accessToken:f},x,{flyTo:E,placeholder:j,zoom:K}));var z=this.originInput.onAdd(this._map),J=this.container.querySelector("#mapbox-directions-origin-input");J.appendChild(z),this.destinationInput=new d.default(Object.assign({},{accessToken:f},x,{flyTo:E,placeholder:G,zoom:K}));var H=this.destinationInput.onAdd(this._map);this.container.querySelector("#mapbox-directions-destination-input").appendChild(H),this.originInput.on("result",function(re){var ee=re.result.center;D(ee),c.animateToCoordinates("origin",ee)}),this.originInput.on("clear",q),this.destinationInput.on("result",function(re){var ee=re.result.center;s(ee),c.animateToCoordinates("destination",ee)}),this.destinationInput.on("clear",$);var X=this.container.querySelectorAll('input[type="radio"]');Array.prototype.forEach.call(X,function(re){re.addEventListener("change",function(){n(re.value)})}),this.container.querySelector(".js-reverse-inputs").addEventListener("click",function(){var re=c.store.getState(),ee=re.origin,h=re.destination;ee&&c.actions.queryDestination(ee.geometry.coordinates),h&&c.actions.queryOrigin(h.geometry.coordinates),r()})}},{key:"render",value:function(){var c=this;this.store.subscribe(function(){var N=c.store.getState(),q=N.originQuery,$=N.destinationQuery,D=N.originQueryCoordinates,s=N.destinationQueryCoordinates;q&&(c.originInput.query(q),c.actions.queryOrigin(null)),$&&(c.destinationInput.query($),c.actions.queryDestination(null)),D&&(c.originInput.setInput(D),c.animateToCoordinates("origin",D),c.actions.queryOriginCoordinates(null)),s&&(c.destinationInput.setInput(s),c.animateToCoordinates("destination",s),c.actions.queryDestinationCoordinates(null))})}}]),o}();v.default=P},{"./geocoder":27,"lodash.isequal":11,"lodash.template":12,"turf-extent":22}],29:[function(k,C,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var d=m(k("../utils")),g=m(k("lodash.template")),_=m(k("lodash.isequal"));function m(o){return o&&o.__esModule?o:{default:o}}function i(o){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i(o)}function p(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}function O(o,a){for(var c=0;c<a.length;c++){var N=a[c];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(o,I(N.key),N)}}function S(o,a,c){return a&&O(o.prototype,a),c&&O(o,c),Object.defineProperty(o,"prototype",{writable:!1}),o}function I(o){var a=y(o,"string");return i(a)==="symbol"?a:String(a)}function y(o,a){if(i(o)!=="object"||o===null)return o;var c=o[Symbol.toPrimitive];if(c!==void 0){var N=c.call(o,a||"default");if(i(N)!=="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(o)}var T=(0,g.default)(`<div class='directions-control directions-control-directions'>
  <div class='mapbox-directions-component mapbox-directions-route-summary<% if (routes > 1) { %> mapbox-directions-multiple<% } %>'>
    <% if (routes > 1) { %>
    <div class='mapbox-directions-routes mapbox-directions-clearfix'>
      <% for (var i = 0; i < routes; i++) { %>
        <input type='radio' name='routes' id='<%= i %>' <% if (i === routeIndex) { %>checked<% } %>>
        <label for='<%= i %>' class='mapbox-directions-route'><%= i + 1 %></label>
      <% } %>
    </div>
    <% } %>
    <h1><%- duration %></h1>
    <span><%- distance %></span>
  </div>

  <div class='mapbox-directions-instructions'>
    <div class='mapbox-directions-instructions-wrapper'>
      <ol class='mapbox-directions-steps'>
        <% steps.forEach(function(step) { %>
          <%
            var distance = step.distance ? format(step.distance) : false;
            var icon = step.maneuver.modifier ? step.maneuver.modifier.replace(/\\s+/g, '-').toLowerCase() : step.maneuver.type.replace(/\\s+/g, '-').toLowerCase();

            if (['arrive', 'depart', 'waypoint'].includes(step.maneuver.type)) {
              icon = step.maneuver.type;
            }

            if (step.maneuver.type === 'roundabout' || step.maneuver.type === 'rotary') {
              icon = 'roundabout';
            }

            var lng = step.maneuver.location[0];
            var lat = step.maneuver.location[1];
          %>
          <li
            data-lat='<%= lat %>'
            data-lng='<%= lng %>'
            class='mapbox-directions-step'>
            <span class='directions-icon directions-icon-<%= icon %>'></span>
            <div class='mapbox-directions-step-maneuver'>
              <%= step.maneuver.instruction %>
            </div>
            <% if (distance) { %>
              <div class='mapbox-directions-step-distance'>
                <%= distance %>
              </div>
            <% } %>
          </li>
        <% }); %>
      </ol>
    </div>
  </div>
</div>
`),F=(0,g.default)(`<div class='directions-control directions-control-directions'>
  <div class='mapbox-directions-error'>
    <%= error %>
  </div>
</div>
`),P=function(){function o(a,c,N,q){p(this,o),this.container=a,this.actions=N,this.store=c,this._map=q,this.directions={},this.render()}return S(o,[{key:"render",value:function(){var c=this;this.store.subscribe(function(){var N=c.actions,q=N.hoverMarker,$=N.setRouteIndex,D=c.store.getState(),s=D.routeIndex,n=D.unit,r=D.directions,w=D.error,x=D.compile,f=D.instructions,E=!(0,_.default)(r[s],c.directions);if(w){c.container.innerHTML=F({error:w});return}var j=f.showWaypointInstructions?void 0:function(H){return H.maneuver.type!=="waypoint"};if(r.length&&E){var G=c.directions=r[s],K=d.default.getAllSteps(G,j);x&&G.legs.forEach(function(H){H.steps.forEach(function(X){X.maneuver.instruction=x("en",X)})}),c.container.innerHTML=T({routeIndex:s,routes:r.length,steps:K,format:d.default.format[n],duration:d.default.format.duration(G.duration),distance:d.default.format[n](G.distance)});var z=c.container.querySelectorAll(".mapbox-directions-step");Array.prototype.forEach.call(z,function(H){var X=H.getAttribute("data-lng"),re=H.getAttribute("data-lat");H.addEventListener("mouseover",function(){q([X,re])}),H.addEventListener("mouseout",function(){q(null)}),H.addEventListener("click",function(){c._map.flyTo({center:[X,re],zoom:16})})});var J=c.container.querySelectorAll('input[type="radio"]');Array.prototype.forEach.call(J,function(H){H.addEventListener("change",function(X){$(parseInt(X.target.id,10))})})}else c.container.innerHTML&&E&&(c.container.innerHTML="")})}}]),o}();v.default=P},{"../utils":34,"lodash.isequal":11,"lodash.template":12}],30:[function(k,C,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var d=k("redux"),g=F(k("redux-thunk")),_=k("@mapbox/polyline"),m=F(k("./utils")),i=F(k("./reducers")),p=T(k("./actions")),O=F(k("./directions_style")),S=F(k("./controls/inputs")),I=F(k("./controls/instructions"));function y(D){if(typeof WeakMap!="function")return null;var s=new WeakMap,n=new WeakMap;return(y=function(w){return w?n:s})(D)}function T(D,s){if(!s&&D&&D.__esModule)return D;if(D===null||P(D)!=="object"&&typeof D!="function")return{default:D};var n=y(s);if(n&&n.has(D))return n.get(D);var r={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in D)if(x!=="default"&&Object.prototype.hasOwnProperty.call(D,x)){var f=w?Object.getOwnPropertyDescriptor(D,x):null;f&&(f.get||f.set)?Object.defineProperty(r,x,f):r[x]=D[x]}return r.default=D,n&&n.set(D,r),r}function F(D){return D&&D.__esModule?D:{default:D}}function P(D){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},P(D)}function o(D,s){if(!(D instanceof s))throw new TypeError("Cannot call a class as a function")}function a(D,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(D,N(r.key),r)}}function c(D,s,n){return s&&a(D.prototype,s),n&&a(D,n),Object.defineProperty(D,"prototype",{writable:!1}),D}function N(D){var s=q(D,"string");return P(s)==="symbol"?s:String(s)}function q(D,s){if(P(D)!=="object"||D===null)return D;var n=D[Symbol.toPrimitive];if(n!==void 0){var r=n.call(D,s||"default");if(P(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(D)}var $=function(){function D(s){o(this,D),this._directions=null,this._stateSnapshot=null,this._store=this._initStore(),this.actions=(0,d.bindActionCreators)(p,this._store.dispatch),this.actions.setOptions(s||{}),this.options=s||{},this.onDragDown=this._onDragDown.bind(this),this.onDragMove=this._onDragMove.bind(this),this.onDragUp=this._onDragUp.bind(this),this.move=this._move.bind(this),this.onClick=this._clickHandler().bind(this)}return c(D,[{key:"onAdd",value:function(n){var r=this;this._map=n;var w=this._store.getState(),x=w.controls,f=this.container=document.createElement("div");f.className="mapboxgl-ctrl-directions mapboxgl-ctrl";var E=document.createElement("div");E.className="directions-control directions-control-inputs",new S.default(E,this._store,this.actions,this._map);var j=document.createElement("div");return j.className="directions-control directions-control-instructions",new I.default(j,this._store,{hoverMarker:this.actions.hoverMarker,setRouteIndex:this.actions.setRouteIndex},this._map),x.inputs&&f.appendChild(E),x.instructions&&f.appendChild(j),this.subscribedActions(),this._map.loaded()?this.mapState():this._map.on("load",function(){return r.mapState()}),f}},{key:"onRemove",value:function(n){return this.container.parentNode.removeChild(this.container),this.removeRoutes(),n.off("mousedown",this.onDragDown),n.off("mousemove",this.move),n.off("touchstart",this.onDragDown),n.off("touchstart",this.move),n.off("click",this.onClick),this.storeUnsubscribe&&(this.storeUnsubscribe(),delete this.storeUnsubscribe),O.default.forEach(function(r){n.getLayer(r.id)&&n.removeLayer(r.id)}),n.getSource("directions")&&n.removeSource("directions"),n.getSource("directions:markers")&&n.removeSource("directions:markers"),this._map=null,this}},{key:"mapState",value:function(){var n=this,r=this._store.getState(),w=r.profile,x=r.alternatives,f=r.congestion,E=r.styles,j=r.interactive,G=r.compile;this.actions.eventEmit("profile",{profile:w});var K={type:"geojson",data:{type:"FeatureCollection",features:[]}};this._map.addSource("directions",K),this._map.addSource("directions:markers",K),E&&E.length&&E.forEach(function(z){return n._map.addLayer(z)}),O.default.forEach(function(z){n._map.getLayer(z.id)||n._map.addLayer(z)}),j&&(this._map.on("mousedown",this.onDragDown),this._map.on("mousemove",this.move),this._map.on("click",this.onClick),this._map.on("touchstart",this.move),this._map.on("touchstart",this.onDragDown))}},{key:"_areMarkersChangedOnly",value:function(n){var r=this,w=[];return this._stateSnapshot?(D.SUBSCRIPTION_FIELDS.forEach(function(x){r._stateSnapshot[x]!==n[x]&&w.push(x)}),w.length<=D.MARKER_FIELDS.length&&w.every(function(x){return D.MARKER_FIELDS.includes(x)})):!1}},{key:"subscribedActions",value:function(){var n=this;this.storeUnsubscribe=this._store.subscribe(function(){var r=n._store.getState(),w=r.origin,x=r.destination,f=r.hoverMarker,E=r.directions,j=r.routeIndex,G=n._areMarkersChangedOnly(r);n._stateSnapshot=r;var K={type:"FeatureCollection",features:[w,x,f].filter(function(J){return J.geometry})};if(n._map.style&&n._map.getSource("directions:markers")&&n._map.getSource("directions:markers").setData(K),!G){var z={type:"FeatureCollection",features:[]};E.length&&E.forEach(function(J,H){var X=[],re=(0,_.decode)(J.geometry,5).map(function(h){return h.reverse()}),ee=m.default.getAllSteps(J);re.forEach(function(h,M){var U=X[X.length-1],B=J.legs[0].annotation&&J.legs[0].annotation.congestion&&J.legs[0].annotation.congestion[M-1];if(U&&(!B||U.properties.congestion===B))U.geometry.coordinates.push(h);else{var L={geometry:{type:"LineString",coordinates:[]},properties:{"route-index":H,route:H===j?"selected":"alternate"}};U&&L.geometry.coordinates.push(U.geometry.coordinates[U.geometry.coordinates.length-1]),L.geometry.coordinates.push(h),B&&(L.properties.congestion=J.legs[0].annotation.congestion[M-1]),X.push(L)}}),z.features=z.features.concat(X),H===j&&ee.forEach(function(h){h.maneuver.type==="waypoint"&&z.features.push({type:"Feature",geometry:{type:"Point",coordinates:h.maneuver.location},properties:{id:"waypoint"}})})}),n._map.style&&n._map.getSource("directions")&&n._map.getSource("directions").setData(z)}})}},{key:"_initStore",value:function(){var n=(0,d.applyMiddleware)(g.default)(d.createStore);return n(i.default)}},{key:"_clickHandler",value:function(){var n=null,r=250;return function(w){if(n)clearTimeout(n),n=null,this._map.zoomIn();else{var x=this._onSingleClick.bind(this);n=setTimeout(function(){x(w),n=null},r)}}}},{key:"_onSingleClick",value:function(n){var r=this,w=this._store.getState(),x=w.origin,f=[n.lngLat.lng,n.lngLat.lat];if(!x.geometry)this.actions.setOriginFromCoordinates(f);else{var E=this._map.queryRenderedFeatures(n.point,{layers:["directions-origin-point","directions-destination-point","directions-waypoint-point","directions-route-line-alt"]});if(E.length){if(E.forEach(function(G){G.layer.id==="directions-waypoint-point"&&r.actions.removeWaypoint(G)}),E[0].properties.route==="alternate"){var j=E[0].properties["route-index"];this.actions.setRouteIndex(j)}}else this.actions.setDestinationFromCoordinates(f),this._map.flyTo({center:f})}}},{key:"_move",value:function(n){var r=this,w=this._store.getState(),x=w.hoverMarker,f=this._map.queryRenderedFeatures(n.point,{layers:["directions-route-line-alt","directions-route-line","directions-origin-point","directions-destination-point","directions-hover-point"]});this._map.getCanvas().style.cursor=f.length?"pointer":"",f.length?(this.isCursorOverPoint=f[0],this._map.dragPan.disable(),f.forEach(function(E){E.layer.id==="directions-route-line"?r.actions.hoverMarker([n.lngLat.lng,n.lngLat.lat]):x.geometry&&r.actions.hoverMarker(null)})):this.isCursorOverPoint&&(this.isCursorOverPoint=!1,this._map.dragPan.enable())}},{key:"_onDragDown",value:function(){this.isCursorOverPoint&&(this.isDragging=this.isCursorOverPoint,this._map.getCanvas().style.cursor="grab",this._map.on("mousemove",this.onDragMove),this._map.on("mouseup",this.onDragUp),this._map.on("touchmove",this.onDragMove),this._map.on("touchend",this.onDragUp))}},{key:"_onDragMove",value:function(n){if(this.isDragging){var r=[n.lngLat.lng,n.lngLat.lat];switch(this.isDragging.layer.id){case"directions-origin-point":this.actions.createOrigin(r);break;case"directions-destination-point":this.actions.createDestination(r);break;case"directions-hover-point":this.actions.hoverMarker(r);break}}}},{key:"_onDragUp",value:function(){if(this.isDragging){var n=this._store.getState(),r=n.hoverMarker,w=n.origin,x=n.destination;switch(this.isDragging.layer.id){case"directions-origin-point":this.actions.setOriginFromCoordinates(w.geometry.coordinates);break;case"directions-destination-point":this.actions.setDestinationFromCoordinates(x.geometry.coordinates);break;case"directions-hover-point":r.geometry&&!m.default.coordinateMatch(this.isDragging,r)&&this.actions.addWaypoint(0,r);break}this.isDragging=!1,this._map.getCanvas().style.cursor="",this._map.off("touchmove",this.onDragMove),this._map.off("touchend",this.onDragUp),this._map.off("mousemove",this.onDragMove),this._map.off("mouseup",this.onDragUp)}}},{key:"interactive",value:function(n){return n?(this._map.on("touchstart",this.move),this._map.on("touchstart",this.onDragDown),this._map.on("mousedown",this.onDragDown),this._map.on("mousemove",this.move),this._map.on("click",this.onClick)):(this._map.off("touchstart",this.move),this._map.off("touchstart",this.onDragDown),this._map.off("mousedown",this.onDragDown),this._map.off("mousemove",this.move),this._map.off("click",this.onClick)),this}},{key:"getOrigin",value:function(){return this._store.getState().origin}},{key:"setOrigin",value:function(n){return typeof n=="string"?this.actions.queryOrigin(n):this.actions.setOriginFromCoordinates(n),this}},{key:"getDestination",value:function(){return this._store.getState().destination}},{key:"setDestination",value:function(n){return typeof n=="string"?this.actions.queryDestination(n):this.actions.setDestinationFromCoordinates(n),this}},{key:"reverse",value:function(){return this.actions.reverse(),this}},{key:"addWaypoint",value:function(n,r){return r.type||(r=m.default.createPoint(r,{id:"waypoint"})),this.actions.addWaypoint(n,r),this}},{key:"setWaypoint",value:function(n,r){return r.type||(r=m.default.createPoint(r,{id:"waypoint"})),this.actions.setWaypoint(n,r),this}},{key:"removeWaypoint",value:function(n){var r=this._store.getState(),w=r.waypoints;return this.actions.removeWaypoint(w[n]),this}},{key:"getWaypoints",value:function(){return this._store.getState().waypoints}},{key:"removeRoutes",value:function(){return this.actions.clearOrigin(),this.actions.clearDestination(),this}},{key:"on",value:function(n,r){return this.actions.eventSubscribe(n,r),this}}]),D}();v.default=$,$.MARKER_FIELDS=["origin","destination","hoverMarker"],$.SUBSCRIPTION_FIELDS=["origin","destination","hovedMarker","directions","routeIndex"]},{"./actions":25,"./controls/inputs":28,"./controls/instructions":29,"./directions_style":31,"./reducers":33,"./utils":34,"@mapbox/polyline":6,redux:18,"redux-thunk":17}],31:[function(k,C,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var d=[{id:"directions-route-line-alt",type:"line",source:"directions",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#bbb","line-width":4},filter:["all",["in","$type","LineString"],["in","route","alternate"]]},{id:"directions-route-line-casing",type:"line",source:"directions",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#2d5f99","line-width":12},filter:["all",["in","$type","LineString"],["in","route","selected"]]},{id:"directions-route-line",type:"line",source:"directions",layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":{property:"congestion",type:"categorical",default:"#4882c5",stops:[["unknown","#4882c5"],["low","#4882c5"],["moderate","#f09a46"],["heavy","#e34341"],["severe","#8b2342"]]},"line-width":7},filter:["all",["in","$type","LineString"],["in","route","selected"]]},{id:"directions-hover-point-casing",type:"circle",source:"directions:markers",paint:{"circle-radius":8,"circle-color":"#fff"},filter:["all",["in","$type","Point"],["in","id","hover"]]},{id:"directions-hover-point",type:"circle",source:"directions:markers",paint:{"circle-radius":6,"circle-color":"#3bb2d0"},filter:["all",["in","$type","Point"],["in","id","hover"]]},{id:"directions-waypoint-point-casing",type:"circle",source:"directions:markers",paint:{"circle-radius":8,"circle-color":"#fff"},filter:["all",["in","$type","Point"],["in","id","waypoint"]]},{id:"directions-waypoint-point",type:"circle",source:"directions:markers",paint:{"circle-radius":6,"circle-color":"#8a8bc9"},filter:["all",["in","$type","Point"],["in","id","waypoint"]]},{id:"directions-origin-point",type:"circle",source:"directions:markers",paint:{"circle-radius":18,"circle-color":"#3bb2d0"},filter:["all",["in","$type","Point"],["in","marker-symbol","A"]]},{id:"directions-origin-label",type:"symbol",source:"directions:markers",layout:{"text-field":"A","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":12},paint:{"text-color":"#fff"},filter:["all",["in","$type","Point"],["in","marker-symbol","A"]]},{id:"directions-destination-point",type:"circle",source:"directions:markers",paint:{"circle-radius":18,"circle-color":"#8a8bc9"},filter:["all",["in","$type","Point"],["in","marker-symbol","B"]]},{id:"directions-destination-label",type:"symbol",source:"directions:markers",layout:{"text-field":"B","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":12},paint:{"text-color":"#fff"},filter:["all",["in","$type","Point"],["in","marker-symbol","B"]]}],g=d;v.default=g},{}],32:[function(k,C,v){"use strict";var d=g(k("./directions"));function g(_){return _&&_.__esModule?_:{default:_}}C.exports=d.default},{"./directions":30}],33:[function(k,C,v){"use strict";function d(y){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},d(y)}Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var g=p(k("../constants/action_types.js")),_=m(k("merge-options"));function m(y){return y&&y.__esModule?y:{default:y}}function i(y){if(typeof WeakMap!="function")return null;var T=new WeakMap,F=new WeakMap;return(i=function(o){return o?F:T})(y)}function p(y,T){if(!T&&y&&y.__esModule)return y;if(y===null||d(y)!=="object"&&typeof y!="function")return{default:y};var F=i(T);if(F&&F.has(y))return F.get(y);var P={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in y)if(a!=="default"&&Object.prototype.hasOwnProperty.call(y,a)){var c=o?Object.getOwnPropertyDescriptor(y,a):null;c&&(c.get||c.set)?Object.defineProperty(P,a,c):P[a]=y[a]}return P.default=y,F&&F.set(y,P),P}var O=function(){return{api:"https://api.mapbox.com/directions/v5/",profile:"mapbox/driving-traffic",alternatives:!1,congestion:!1,unit:"imperial",flyTo:!0,placeholderOrigin:"Choose a starting place",placeholderDestination:"Choose destination",zoom:16,language:"en",compile:null,proximity:!1,styles:[],controls:{profileSwitcher:!0,inputs:!0,instructions:!0},instructions:{showWaypointInstructions:!0},geocoder:{},interactive:!0,events:{},origin:{},destination:{},hoverMarker:{},waypoints:[],originQuery:null,destinationQuery:null,originQueryCoordinates:null,destinationQueryCoordinates:null,directions:[],fetchDirectionsRequest:null,routeIndex:0,routePadding:80}};function S(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O(),T=arguments.length>1?arguments[1]:void 0;switch(T.type){case g.SET_OPTIONS:return(0,_.default)({},y,T.options);case g.DIRECTIONS_PROFILE:return Object.assign({},y,{profile:T.profile});case g.ORIGIN:return Object.assign({},y,{origin:T.origin,hoverMarker:{}});case g.DESTINATION:return Object.assign({},y,{destination:T.destination,hoverMarker:{}});case g.HOVER_MARKER:return Object.assign({},y,{hoverMarker:T.hoverMarker});case g.WAYPOINTS:return Object.assign({},y,{waypoints:T.waypoints});case g.ORIGIN_QUERY:return Object.assign({},y,{originQuery:T.query});case g.DESTINATION_QUERY:return Object.assign({},y,{destinationQuery:T.query});case g.ORIGIN_FROM_COORDINATES:return Object.assign({},y,{originQueryCoordinates:T.coordinates});case g.DESTINATION_FROM_COORDINATES:return Object.assign({},y,{destinationQueryCoordinates:T.coordinates});case g.ORIGIN_CLEAR:return Object.assign({},y,{origin:{},originQuery:"",waypoints:[],directions:[]});case g.DESTINATION_CLEAR:return Object.assign({},y,{destination:{},destinationQuery:"",waypoints:[],directions:[]});case g.DIRECTIONS_REQUEST_START:return Object.assign({},y,{fetchDirectionsRequest:T.request});case g.DIRECTIONS:return Object.assign({},y,{directions:T.directions,fetchDirectionsRequest:null});case g.ROUTE_INDEX:return Object.assign({},y,{routeIndex:T.routeIndex});case g.ERROR:return Object.assign({},y,{error:T.error});default:return y}}var I=S;v.default=I},{"../constants/action_types.js":26,"merge-options":14}],34:[function(k,C,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;function d(I){return I[0]>=-180&&I[0]<=180&&I[1]>=-90&&I[1]<=90}function g(I,y){return I=I.geometry.coordinates,y=y.geometry.coordinates,I.join()===y.join()||I[0].toFixed(3)===y[0].toFixed(3)&&I[1].toFixed(3)===y[1].toFixed(3)}function _(I){var y=360,T=((I- -180)%y+y)%y+-180;return T===-180?180:T}function m(I,y){var T=0;return Math.floor(y)!==y&&(T=y.toString().split(".")[1].length),I.toFixed(Math.min(T,5))}function i(I,y){return{type:"Feature",geometry:{type:"Point",coordinates:I},properties:y||{}}}function p(I,y){return I.legs.reduce(function(T,F,P){P>0&&(T[T.length-1].maneuver.type="waypoint",F.steps[0].maneuver.type="");var o=T.concat(F.steps);return y?o.filter(y):o},[])}var O={duration:function(y){var T=Math.floor(y/60),F=Math.floor(T/60);return y%=60,T%=60,F===0&&T===0?y+"s":F===0?T+"min":F+"h "+T+"min"},imperial:function(y){var T=y/1609.344;return T>=100?T.toFixed(0)+"mi":T>=10?T.toFixed(1)+"mi":T>=.1?T.toFixed(2)+"mi":(T*5280).toFixed(0)+"ft"},metric:function(y){return y>=1e5?(y/1e3).toFixed(0)+"km":y>=1e4?(y/1e3).toFixed(1)+"km":y>=100?(y/1e3).toFixed(2)+"km":y.toFixed(0)+"m"}},S={format:O,coordinateMatch:g,createPoint:i,validCoords:d,wrap:_,roundWithOriginalPrecision:m,getAllSteps:p};v.default=S},{}]},{},[32])(32)});
